<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_30" NODE="30-1-6-7" TITLE="30 / / Creating and Using New Layers / Reordering Layers" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>30 / / Creating and Using New Layers / Reordering Layers</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node03F5.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node03F7.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
The layers library provides three function calls for reordering layers:

    LONG BehindLayer ( long dummy, struct Layer *layer );
    LONG UpfrontLayer( long dummy, struct Layer *layer );
    LONG MoveLayerInFrontOf( struct Layer *layer_to_move,
                             struct Layer *other_layer );

<a href="../Includes_and_Autodocs_2._guide/node038F.html">BehindLayer()</a> moves a layer behind all other layers.  This function
considers any <a href="../Libraries_Manual_guide/node03EA.html">backdrop</a> layers, moving a current layer behind all others
except backdrop layers.  <a href="../Includes_and_Autodocs_2._guide/node03A9.html">UpfrontLayer()</a> moves a layer in front of all
other layers.  <a href="../Includes_and_Autodocs_2._guide/node039F.html">MoveLayerInFrontOf()</a> is used to place a layer at a specific
<a name="line13">depth, just in front of a given layer.</a>

As areas of <a href="../Libraries_Manual_guide/node03E7.html">simple refresh</a> layers become exposed, due to layer movement or
sizing for example, the newly exposed areas have not been drawn into, and
need refreshing.  The system keeps track of these areas by using a
<a href="../Libraries_Manual_guide/node03E4.html#line21">DamageList</a>.  To update only those areas that need it, the <a href="../Includes_and_Autodocs_2._guide/node038E.html">BeginUpdate()</a>
<a href="../Includes_and_Autodocs_2._guide/node0396.html">EndUpdate()</a> functions are called.

    LONG BeginUpdate( struct Layer *l );
    void EndUpdate  ( struct Layer *layer, unsigned long flag );

<a href="../Includes_and_Autodocs_2._guide/node038E.html">BeginUpdate()</a> saves the pointer to the current clipping rectangles and
installs a pointer to a set of <a href="../Libraries_Manual_guide/node03E4.html#line11">ClipRect</a>s generated from the <a href="../Libraries_Manual_guide/node03E4.html#line21">DamageList</a> in
the layer structure.  To repair the layer, use the graphics rendering
routines as if to redraw the entire layer, and the routines will
automatically use the new clipping rectangle list.  So, only the damaged
<a name="line29">areas are actually rendered into, saving time.</a>

    Never Modify the DamageList.
    ----------------------------
    The system generates and maintains the <a href="../Libraries_Manual_guide/node03E4.html#line21">DamageList</a> region.  All
    application clipping should be done through the <a href="../Libraries_Manual_guide/node03F8.html#line16">InstallClipRegion()</a>
    function.

To complete the update process call <a href="../Includes_and_Autodocs_2._guide/node0396.html">EndUpdate()</a> which will restore the
original <a href="../Libraries_Manual_guide/node03E4.html#line11">ClipRect</a> list.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
