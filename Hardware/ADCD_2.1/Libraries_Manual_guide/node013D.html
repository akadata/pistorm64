<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_5" NODE="5-4-3" TITLE="5 / Gadget Size and Position / Positioning Gadgets in Window Borders" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>5 / Gadget Size and Position / Positioning Gadgets in Window Borders</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node013C.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node013E.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
Gadgets may be placed in the borders of a window.  To do this, set one or
more of the border flags in the <a href="../Libraries_Manual_guide/node0149.html">Gadget</a> structure and position the gadget
in the window border.  Setting these flags also tells Intuition to adjust
the size of the window's borders to accommodate the gadget.

Borders are adjusted only when the window is opened.  Although the
application can add and remove gadgets with <a href="../Libraries_Manual_guide/node0133.html#line7">AddGList()</a> and <a href="../Libraries_Manual_guide/node0133.html#line27">RemoveGList()</a>
after the window is opened, Intuition does not readjust the borders.

A gadget may be placed into two borders by setting multiple border flags.
If a gadget is to be placed in two borders, it only makes sense to put the
gadget into adjoining borders.  Setting both side border flags or both the
top and bottom border flags for a particular gadget, will create a window
that is all border.

See the SuperBitMap example, <a href="../Libraries_Manual_guide/node05BD.html">lines.c</a>, in the &#034;Intuition Windows&#034; chapter
for an example of creating <a href="../Libraries_Manual_guide/node0153.html">proportional</a> gadgets that are positioned within
<a name="line19">a window's borders.</a>

There are circumstances where the border size will not adjust properly so
that the gadget has the correct visual appearance.  One way to correct
this problem is to place a &#034;hidden&#034; gadget into the border, which forces
the border to the correct size.  Such a gadget would have no imagery and
would not cause any IDCMP messages to be sent on mouse button activity.
The gadget should be placed at the end of the gadget list of the window,
<a name="line27">so that it does not cover up any other border gadgets.</a>

Sometimes the sizing gadget can be used to adjust the width of the
borders, as in the case of <a href="../Libraries_Manual_guide/node0153.html">proportional</a> gadgets in the right or bottom
border.  The proportional gadget will only increase the width of the
border by enough so that the select box of the gadget fits within the
border, no space is reserved between the gadget and the inner edge of the
window.  By placing the size gadget in both borders (using the window
flags <a href="../Libraries_Manual_guide/node0125.html#line15">WFLG_SIZEBRIGHT</a> and <a href="../Libraries_Manual_guide/node0125.html#line19">WFLG_SIZEBBOTTOM</a>), the prop gadget sizes can be
adjusted so that there is an even margin on all sides.  This technique is
used in the lines.c example mentioned above.


    size gadget in        size gadget in        size gadget in
     both borders         bottom border          side border
    --------------        --------------        --------------

          |     |                    ||               |     |
          |     |                    ||               |     |
          |     |                    ||               |     |
          |     |                    ||               |     |
          |     |                    ||               |     |
     _____|_____|          __________||               |_____|
          |     |               |     |               |     |
          |   /||               |   /||               |   /||
          |  / ||               |  / ||               |  / ||
          | /__||               | /__||          _____| /__||
     _____|_____|          _____|_____|          _____|_____|


   Figure 5-2: Size Gadget in Various Window Border Combinations
<a name="line58"></a>

The border flags <a href="../Libraries_Manual_guide/node014B.html#line56">GACT_RIGHTBORDER</a>, <a href="../Libraries_Manual_guide/node014B.html#line61">GACT_LEFTBORDER</a>, <a href="../Libraries_Manual_guide/node014B.html#line66">GACT_TOPBORDER</a> and
<a href="../Libraries_Manual_guide/node014B.html#line71">GACT_BOTTOMBORDER</a> which are set in the <a href="../Libraries_Manual_guide/node0149.html#line53">Activation</a> field of the <a href="../Libraries_Manual_guide/node0149.html">Gadget</a>
structure declare that the gadget will be positioned in the border.
Gadgets which are declared to be in the border are automatically refreshed
by Intuition whenever the window borders need to be redrawn.  This
prevents the gadget imagery from being obliterated.

Some applications forgot to declare some of their gadgets as being in the
border.  While they looked fine prior to V36, they would have had some
gadget imagery overwritten by the new style of window borders introduced
with that release.  To ensure compatibility with such applications,
Intuition attempts to identify gadgets that are substantially in the
border but do not have the appropriate border flags set.  Such gadgets are
marked for the same refresh treatment as explicit border gadgets.
Applications should not rely on this behavior, but should instead declare
their border gadgets properly.

Gadgets that are not declared to be in the border, and whose dimensions
are 1 x 1 or smaller are never marked by Intuition as being effectively in
the border.  This is because some applications tuck a small non-selectable
gadget (of size 0x0 or 1x1) into the window border, and attach imagery for
the window to that gadget.  The application does this to get automatic
refresh of that imagery, since Intuition refreshes gadget imagery when
window damage occurs.

Beginning with V36, Intuition attempts to locate gadgets within the border
that do not have the appropriate flags set.  This may cause gadgets to
appear in the border when the application has not set any of the border
flags.  Applications should not rely on this behavior, nor should they
place non-border gadgets fully or partially within the window's borders.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
