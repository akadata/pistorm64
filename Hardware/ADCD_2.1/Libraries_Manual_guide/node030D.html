<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_26" NODE="26-3" TITLE="26 Exec Interrupts / Software Interrupts" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>26 Exec Interrupts / Software Interrupts</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node030C.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node030E.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
Exec provides a means of generating software interrupts. Software
interrupts execute at a priority higher than that of tasks but lower than
that of hardware interrupts, so they are often used to defer hardware
interrupt processing to a lower priority.  Software interrupts use the
same <a href="../Libraries_Manual_guide/node0307.html">Interrupt</a> data structure as hardware interrupts.  As <a href="../Libraries_Manual_guide/node0307.html">described above</a>,
this structure contains pointers to both interrupt code and data, and
should be initialized as node type <a href="../Includes_and_Autodocs_2._guide/node0091.html#line43">NT_INTERRUPT</a> (not <a href="../Includes_and_Autodocs_2._guide/node0091.html#line43">NT_SOFTINT</a> which is
<a name="line9">an internal Exec flag).</a>

A software interrupt is usually activated with the <a href="../Includes_and_Autodocs_2._guide/node033D.html">Cause()</a> function.  If
this function is called from a task, the task will be interrupted and the
software interrupt will occur.  If it is called from a hardware interrupt,
the software interrupt will not be processed until the system exits from
its last hardware interrupt.  If a software interrupt occurs from within
another software interrupt, it is not processed until the current one is
completed.  However, individual software interrupts do not nest, and will
not be caused if already running as a software interrupt.

    Don't Trash A6!
    ---------------
    Software interrupts execute in an environment almost identical to
    that of hardware interrupts, and the same restrictions on allowable
    system function calls (as described earlier) apply to both.  Note
    however that, unlike other interrupts, software interrupts must
<a name="line26">    preserve A6.</a>

Software interrupts are prioritized.  Unlike interrupt servers, software
interrupts have only five allowable priority levels:  -32, -16, 0, +16,
and +32.  The priority should be put into the <a href="../Libraries_Manual_guide/node02D9.html#line34">ln_Pri</a> field prior to
<a name="line31">calling <a href="../Includes_and_Autodocs_2._guide/node033D.html">Cause()</a>.</a>

Software interrupts can also be generated by message arrival at a
<a href="../Libraries_Manual_guide/node02EB.html#line55">PA_SOFTINT</a> message port.  The applications of this technique are limited
since it is not permissible, with most devices, to send IO requests from
within interrupt code.  However, the timer.device does allow such
interactions, so a self-perpetuating PA_SOFTINT timer port can provide an
application with quite consistent timing under varying multitasking loads.
The following example demonstrates use of a software interrupt and a
PA_SOFTINT port.  See the &#034;<a href="../Libraries_Manual_guide/node02EA.html">Exec Messages and Ports</a>&#034; chapter for more
information about messages and ports.

     <a href="../Libraries_Manual_guide/node05ED.html">timersoftint.c</a> 
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
