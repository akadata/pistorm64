<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_28" NODE="28-5-2" TITLE="28 / VSprite Advanced Topics / How VSprites Are Assigned" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>28 / VSprite Advanced Topics / How VSprites Are Assigned</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node0392.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node0394.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
Although VSprites are managed for you by the GELs system there are some
underlying limitations which could cause the system to run out of VSprites.

As the system goes through the GEL list during <a href="../Libraries_Manual_guide/node038C.html">DrawGList()</a>, whenever it
finds a true VSprite, it goes through the following procedure. If there is
a Simple Sprite available (after the reserved sprites and preceding
VSprites are accounted for), Copper instructions are added that will load
the sprite hardware with this VSprite's data at the right point on the
screen. It may need to add a Copper instruction sequence to load the
<a name="line11">display's colors associated with the sprite as well.</a>

 There are only 8 real sprite DMA channels.  The system will run out of
hardware sprites if it is asked to display more than eight VSprites on one
scan line.  This limit goes down to four when the VSprites have different
<a href="../Libraries_Manual_guide/node0388.html">SprColor</a> pointers. During the time that there is a conflict, the VSprites
that could not be put into Simple Sprites will disappear.  They will
reappear when (as the VSprites are moved about the screen) circumstances
permit.

These problems can be alleviated by taking some precautions:

  * Minimize the number of VSprites to appear on a single horizontal line.

  * If colors for some Virtual Sprites are the same, make sure that the
    pointer for each of the <a href="../Libraries_Manual_guide/node0381.html">VSprite</a> structures for these Virtual Sprites
    points to the same memory location, rather than to a duplicate set of
    colors elsewhere in memory. The system will know to map these into
    Sprite pairs.

If a VSprite's <a href="../Libraries_Manual_guide/node0388.html">SprColors</a> are set to NULL, the VSprite will appear in the
<a href="../Libraries_Manual_guide/node00F1.html#line4">ViewPort</a>'s <a href="../Libraries_Manual_guide/node00F1.html#line4">ColorMap</a> colors.  The system will display the VSprite in any
one of a set of four different possible color groupings as indicated in
the <a href="../Libraries_Manual_guide/node0379.html#line31">Simple Sprite section</a> above.

If <a href="../Libraries_Manual_guide/node0388.html">SprColors</a> points to a color set, the system will jam SprColors into the
display hardware (via the Copper list), effectively overriding those
<a href="../Libraries_Manual_guide/node00F1.html#line4">ColorMap</a> registers.  The values in the ColorMap are not overwritten, but
anything in the background display that used to appear in the ColorMap
colors will appear in SprColors colors.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
