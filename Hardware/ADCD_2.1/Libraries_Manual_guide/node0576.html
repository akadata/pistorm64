<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_E" NODE="E-3-3" TITLE="E / Additional Information / Workbench And Startup" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>E / Additional Information / Workbench And Startup</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node0575.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node0577.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
Under 1.3, the Workbench Screen and initial Shell (CLI) opened before the
first line in s:startup-sequence.  Some naughty programmers, in an attempt
to recover memory, would search for the bitplane pointers and appropriate
the memory for their own use.  This behavior is unsafe.

By default 2.0 opens the initial CLI on the first _output_ from the
s:startup-sequence.  This allows screen modes and other parameters to be
set before the user sees the screen.  However, this broke so many programs
that we put in the &#034;silent-startup&#034; hack.  A disk installed with 1.3
install opens the screen as before.  A disk installed under 2.0 opens
silently. Never steal the Workbench bitplanes.  You don't know where they
are, how big they are, what format they may be in, or even if they are
allocated.  Recovering the memory is a bit tricky.

Under 2.0, simply avoid any output from your s:startup-sequence.  If your
program opens a screen it will be the first screen the user ever sees.
Note that if ENDCLI is ever hit, the screen will pop open.

Under 1.3, after ENDCLI, use <a href="../Libraries_Manual_guide/node00E8.html#line25">CloseWorkbench()</a> to close the screen.  This
also works under 2.0.  Loop on CloseWorkbench() with a delay between
loops.  Continue looping until CloseWorkbench() succeeds or too much time
has passed.  Note that a new program called EndRun is available for
starting non-returning programs from the startup-sequence.  EndRun will
reduce memory fragmentation and will close Workbench if it is open.
EndRun.lzh will be available in Commodore's Amiga listings area on BIX.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
