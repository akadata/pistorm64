<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_6" NODE="6-2-14" TITLE="6 / Setting Up Menus / Managing the State of Checkmarks" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>6 / Setting Up Menus / Managing the State of Checkmarks</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node018F.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node0191.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
To correctly handle checkmarked menu items, from time to time the
application will need to read the <a href="../Libraries_Manual_guide/node019B.html#line7">CHECKED</a> bit of its <a href="../Libraries_Manual_guide/node019B.html#line3">CHECKIT</a> <a href="../Libraries_Manual_guide/node019A.html">MenuItem</a>s.
It is not adequate to infer which items are checked by tracking what their
state must have become.  There are several reasons for this (although it's
not important to understand the details; just the implication):

  * Using multi-selection of menus, the user can toggle the state of a
    <a href="../Libraries_Manual_guide/node019B.html#line24">MENUTOGGLE</a> item several times, yet the application will receive only
    a single <a href="../Libraries_Manual_guide/node01DE.html">IDCMP_MENUPICK</a> event, and that item will only appear once
    one the <a href="../Libraries_Manual_guide/node019A.html#line93">NextSelect</a> chain.

  * When the user selects a mutually exclusive menu item, the
    <a href="../Libraries_Manual_guide/node01DE.html">IDCMP_MENUPICK</a> event refers to that item, but Intuition doesn't
    notify your application of other items that may have been deselected
    through mutual exclusion.

  * Prior to V36, unusually complex multi-selection operations could
    orphan menu selections.  That is to say, some items that were
    selected may not even appear on the <a href="../Libraries_Manual_guide/node019A.html#line93">NextSelect</a> chain.  If such an
    item had a checkmark, the state of that checkmark could nevertheless
    have changed.

  * For complex multi-selection operations, the <a href="../Libraries_Manual_guide/node019A.html#line93">NextSelect</a> chain will not
    be in select-order (a side-effect of the fact that the same <a href="../Libraries_Manual_guide/node019A.html">MenuItem</a>
    cannot appear twice in the same NextSelect chain combined with the
    fix to the orphaning problems mentioned above).  With certain mutual
    exclusion arrangements, it is impossible to predict the state of the
    checkmarks.

  * If the user begins multi-selection in the menus and hits several
    checkmarked items, but then presses the help key, the application
    will receive an <a href="../Libraries_Manual_guide/node01DE.html#line21">IDCMP_MENUHELP</a> message.  No <a href="../Libraries_Manual_guide/node01DE.html">IDCMP_MENUPICK</a> message
    will have been sent.  Thus, some checkmark changes could have gone
    unnoticed by the application.

It is legal to examine the <a href="../Libraries_Manual_guide/node019B.html#line7">CHECKED</a> state of a <a href="../Libraries_Manual_guide/node019A.html">MenuItem</a> while that MenuItem
is still attached to a window.  It is unnecessary to first call
<a href="../Libraries_Manual_guide/node0181.html#line11">ClearMenuStrip()</a>.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
