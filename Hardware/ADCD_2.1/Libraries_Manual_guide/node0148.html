<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_5" NODE="5-8" TITLE="5 Intuition Gadgets / Gadget Pointer Movements" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>5 Intuition Gadgets / Gadget Pointer Movements</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node0147.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node0149.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
If the <a href="../Libraries_Manual_guide/node014B.html#line40">GACT_FOLLOWMOUSE</a> flag is set for a gadget, the application will
receive mouse movement broadcasts as long as the gadget is active. This
section covers the behavior of <a href="../Libraries_Manual_guide/node0153.html">proportional</a>, <a href="../Libraries_Manual_guide/node014C.html">boolean</a> and <a href="../Libraries_Manual_guide/node0164.html">string</a> gadgets,
<a name="line5">although there are major caveats in some cases:</a>

  * Unlike <a href="../Libraries_Manual_guide/node01DD.html#line6">IDCMP_GADGETUP</a> and <a href="../Libraries_Manual_guide/node01DD.html">IDCMP_GADGETDOWN</a> <a href="../Libraries_Manual_guide/node01D9.html">IntuiMessage</a>s, the
    <a href="../Libraries_Manual_guide/node01D9.html#line73">IAddress</a> field of an <a href="../Libraries_Manual_guide/node01DC.html#line23">IDCMP_MOUSEMOVE</a> IntuiMessage does not point to
    the gadget.  The application must track the active gadget (this
    information is readily obtained from the IDCMP_GADGETDOWN message)
    instead of using the IAddress field.


	Right                          Wrong
        -----                          -----
        imsg=GetMsg(win-&#062;UserPort);    imsg=GetMsg(win-&#062;UserPort);
        class=imsg-&#062;Class;             class=imsg-&#062;Class;
        code=imsg-&#062;Code;               code=imsg-&#062;Code;
        /* OK */                       /* ILLEGAL ! */
        iaddress=imsg-&#062;IAddress;       gadid=((struct Gadget *)
                                               imsg-&#062;IAddress)-&#062;GadgetID;
        ReplyMsg(imsg);                ReplyMsg(imsg);


    Using the code in the left column, it is acceptable to get the
    address of a gadget with gadid=((struct Gadget *)iaddress)-&#062;GadgetID
    but only after you have checked to make sure the message is an
    <a href="../Libraries_Manual_guide/node01DD.html#line6">IDCMP_GADGETUP</a> or <a href="../Libraries_Manual_guide/node01DD.html">IDCMP_GADGETDOWN</a>.

  * <a href="../Libraries_Manual_guide/node014C.html">Boolean</a> gadgets only receive mouse messages if both <a href="../Libraries_Manual_guide/node014B.html#line14">GACT_RELVERIFY</a>
    and <a href="../Libraries_Manual_guide/node014B.html#line40">GACT_FOLLOWMOUSE</a> are set.  Those cases described below with
<a name="line32">    GACT_RELVERIFY cleared do not apply to boolean gadgets.</a>

  * In general, <a href="../Libraries_Manual_guide/node01DC.html#line23">IDCMP_MOUSEMOVE</a> messages are sent when the mouse changes
    position while the gadget is active.  <a href="../Libraries_Manual_guide/node014C.html">Boolean</a> and <a href="../Libraries_Manual_guide/node0153.html">proportional</a>
    gadgets are active while the mouse button is held down, thus mouse
    move messages will be received when the user &#034;drags&#034; with the mouse.
    <a href="../Libraries_Manual_guide/node0164.html">String</a> gadgets are active until terminated by keyboard entry or
    another object becomes active (generally by user clicking the other
    object).  <a href="../Libraries_Manual_guide/node014B.html#line40">GACT_FOLLOWMOUSE</a> string gadgets will generate mouse moves
    the entire time they are active, not just when the mouse button is
<a name="line42">    held.</a>

The broadcasts received differ according to the gadget's flag settings.
If using the <a href="../Libraries_Manual_guide/node014B.html#line9">GACT_IMMEDIATE</a> and <a href="../Libraries_Manual_guide/node014B.html#line14">GACT_RELVERIFY</a> activation flags, the
program gets a gadget down message, receives mouse reports
(<a href="../Libraries_Manual_guide/node01DC.html#line23">IDCMP_MOUSEMOVE</a>) as the mouse moves, and receives a gadget up message
when the mouse button is released.  For <a href="../Libraries_Manual_guide/node014C.html">boolean</a> gadgets, the mouse button
must be released while the pointer is over the gadget. If the button is
not released over the boolean gadget, an <a href="../Libraries_Manual_guide/node01DC.html">IDCMP_MOUSEBUTTONS</a> message with
<a name="line51">the SELECTUP qualifier will be sent.</a>

If only using the <a href="../Libraries_Manual_guide/node014B.html#line9">GACT_IMMEDIATE</a> activation flag, the program gets a
gadget down message and receives mouse reports as the mouse moves. The
mouse reports will stop when the user releases the mouse select button.
This case does not apply to <a href="../Libraries_Manual_guide/node014C.html">boolean</a> gadgets as <a href="../Libraries_Manual_guide/node014B.html#line14">GACT_RELVERIFY</a> must be set
for boolean gadgets to receive mouse messages. If only using the
GACT_RELVERIFY activation flag, the program gets mouse reports followed by
an up event for a gadget.  For boolean gadgets, the <a href="../Libraries_Manual_guide/node01DD.html#line6">IDCMP_GADGETUP</a> event
will only be received if the button was released while the pointer was
over the gadget.  If the button is not released over the boolean gadget, a
<a href="../Libraries_Manual_guide/node01DC.html">IDCMP_MOUSEBUTTONS</a> message with the SELECTUP qualifier will be received if
the program is receiving these events.

If neither the <a href="../Libraries_Manual_guide/node014B.html#line9">GACT_IMMEDIATE</a> nor the <a href="../Libraries_Manual_guide/node014B.html#line14">GACT_RELVERIFY</a> activation flags are
set, the program will only receive mouse reports.  This case does not
apply to <a href="../Libraries_Manual_guide/node014C.html">boolean</a> gadgets  as GACT_RELVERIFY must be set for boolean
gadgets to receive mouse messages.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
