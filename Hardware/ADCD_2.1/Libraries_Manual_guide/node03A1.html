<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_28" NODE="28-6-8-3" TITLE="28 / / Other Items Influencing Bob Colors / PlaneOnOff" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>28 / / Other Items Influencing Bob Colors / PlaneOnOff</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node03A0.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node03A2.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
What happens to the background planes that aren't picked?  The shadow mask
is used to either set or clear the bits in those planes in the exact shape
of the Bob if <a href="../Libraries_Manual_guide/node0397.html#line34">OVERLAY</a> is set, otherwise the entire rectangle containing
the Bob is used.  The <a href="../Includes_and_Autodocs_2._guide/node00C3.html#line123">PlaneOnOff</a> member tells the system whether to put
down the shadow mask as zeros or ones for each plane.  The relationship
between bit positions in PlaneOnOff and background plane numbers is
identical to <a href="../Libraries_Manual_guide/node03A0.html">PlanePick</a>: the least significant bit position indicates the
lowest-numbered bitplane.  A zero bit clears the shadow mask shape in the
corresponding plane, while a one bit sets the shadow mask shape.  The
planes Picked by PlanePick have image data - not shadow mask - blitted in.

This provides a great deal of color versatility.  One image definition can
be used for many Bobs.  By having different <a href="../Libraries_Manual_guide/node03A0.html">PlanePick</a> / <a href="../Includes_and_Autodocs_2._guide/node00C3.html#line123">PlaneOnOff</a>
combinations, each Bob can use a different subset of the background color
<a name="line16">set.</a>

There is a member in the <a href="../Libraries_Manual_guide/node0381.html">VSprite</a> structure called <a href="../Libraries_Manual_guide/node03AF.html">CollMask</a> (the collision
mask, covered under &#034;<a href="../Libraries_Manual_guide/node03AC.html">Detecting GEL Collisions</a>&#034;) for which the application
may also reserve some memory space.  The <a href="../Libraries_Manual_guide/node039F.html">ImageShadow</a> and CollMask pointers
usually, but not necessarily, point to the same data, which must be
located in Chip memory.  If they point to the same location, obviously,
the memory only need be allocated once.

An example of the kinds of statements that accomplish these actions (see
the <a href="../Libraries_Manual_guide/node059C.html#line89">makeVSprite()</a> and <a href="../Libraries_Manual_guide/node059C.html#line129">makeBob()</a> examples for more details):


#define BOBW 1
#define BOBH 5
#define BOBD 2

/* Data definition from example layout */
WORD chip BobData[]=
    {
    0xFFFF, 0x300C, 0x0FF0, 0x03C0, 0x0180,
    0xFFFF, 0x3E7C, 0x0C30, 0x03C0, 0x0180
    };

/* Reserve space for the collision mask for this Bob */
WORD chip BobCollision[BOBW * BOBH];

myVSprite.Width  = BOBW;     /* Image is 16 pixels wide (1 word) */
myVSprite.Height = BOBH;    /* 5 lines for each plane of the Bob */
myVSprite.Depth  = BOBD;     /* 2 Planes are in ImageData */

/* Show the system where it can find the data image of the Bob */
myVSprite.ImageData = BobData;

/* binary 0101, render image data into bitplanes 0 and 2 */
myVSprite.PlanePick = 0x05;

/* binary 0000, means colors 1, 4, and 5 will be used.
*  binary 0010 would mean colors 3, 6, and 7.
*    &#034;    1000   &#034;    &#034;     &#034;    9, C, and D.
*    &#034;    1010   &#034;    &#034;     &#034;    B, E, and F.
*/
myVSprite.PlaneOnOff = 0x00;

/* Where to put collision mask */
myVSprite.CollMask = BobCollision;

/* Tell the system where it can assemble a GEL shadow */
/* Point to same area as CollMask */
myBob.ImageShadow = BobCollision;

/* Create the Sprite collision mask in the VSprite structure */
InitMasks(&#038;myVSprite);
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
