<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_21" NODE="21-2-1" TITLE="21 / Task Creation / Task Creation With Amiga.lib" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>21 / Task Creation / Task Creation With Amiga.lib</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node02BC.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node02BE.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
A simpler method of creating a task is provided by the amiga.lib Exec
support function <a href="../Includes_and_Autodocs_2._guide/node014A.html">CreateTask()</a>, which can be accessed if your code is
linked with amiga.lib.

<a name="line6">    CreateTask(char *name, LONG priority, APTR initialPC, ULONG stacksize)</a>

A task created with <a href="../Includes_and_Autodocs_2._guide/node014A.html">CreateTask()</a> may be removed with the amiga.lib
<a href="../Includes_and_Autodocs_2._guide/node0155.html">DeleteTask()</a> function, or it may simply return when it is finished.
CreateTask() adds a <a href="../Libraries_Manual_guide/node02B1.html">MemList</a> to the <a href="../Libraries_Manual_guide/node02BB.html#line28">tc_MemEntry</a> of the task it creates,
describing all memory it has allocated for the task, including the task
stack and the <a href="../Libraries_Manual_guide/node02BB.html">Task</a> structure itself.  This memory will be deallocated by
Exec when the task is either explicitly removed (<a href="../Libraries_Manual_guide/node02D0.html#line5">RemTask()</a> or
DeleteTask()) or when it exits to Exec's default task removal code
(RemTask()).

Note that a bug in the <a href="../Includes_and_Autodocs_2._guide/node014A.html">CreateTask()</a> code caused a failed memory allocation
to go unnoticed in V33 and early versions of Release 2 amiga.lib.

If your development language is not linkable with amiga.lib, it may
provide an equivalent built-in function, or you can create your own based
on the &#034;createtask.c&#034; code in the Amiga ROM Kernel Reference Manual:
Includes and Autodocs.

Depending on the priority of a new task and the priorities of other tasks
<a name="line26">in the system, the newly added task may begin execution immediately.</a>

    Sharing Library Pointers
    ------------------------
    Although in most cases it is possible for a parent task to pass a
    library base to a child task so the child can use that library, for
    some libraries, this is not possible.  For this reason, the only
    library base sharable between tasks is Exec's library base.

Here is an example of simple task creation.  In this example there is no
coordination or communication between the main process and the simple task
it has created.  A more complex example might use named ports and messages
to coordinate the activities and shutdown of two tasks.  Because our task
is very simple and never calls any system functions which could cause it
to be signalled or awakened, we can safely remove the task at any time.

    Keep This In Mind.
    ------------------
    Because the simple task's code is a function in our program, we must
    stop the subtask before exiting.

     <a href="../Libraries_Manual_guide/node058F.html">simpletask.c</a> 
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
