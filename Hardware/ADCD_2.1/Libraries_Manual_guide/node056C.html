<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_E" NODE="E-2-12" TITLE="E / Release 2 Changes That Can Affect Compatibility / Intuition" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>E / Release 2 Changes That Can Affect Compatibility / Intuition</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node056B.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node056D.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
  * Private <a href="../Libraries_Manual_guide/node01F6.html">IntuitionBase</a> variables have moved/changed.  Reading them is
    illegal.  Writing them is both illegal and dangerous.

  * Poking <a href="../Libraries_Manual_guide/node01F6.html">IntuitionBase</a> MaxMouse variables is now a no-op, but stop
    poking when Intuition version is &#062;35.

  * If you are opening on the Workbench screen, be prepared to handle
    larger screens, new modes, new fonts, and overscan.  Also see
    &#034;<a href="../Libraries_Manual_guide/node0571.html">Fonts</a>&#034; compatibility information.

  * Screen TopEdge and LeftEdge may be negative.

  * Left-Amiga-Select is used for dragging large screens. Do not use
    left-Amiga-key combinations for application command keys.  The
    left-Amiga key is reserved for system use.

  * For compatibility reasons, <a href="../Libraries_Manual_guide/node00FC.html#line20">GetScreenData()</a> lies if the Workbench
    screen is a mode only available after 1.3.  It will try to return the
    most sensible mode that old <a href="../Libraries_Manual_guide/node00DF.html#line6">OpenScreen()</a> can open.  This was
    necessary to prevent problems in applications that cloned the
    Workbench screen. To properly handle new modes, see <a href="../Libraries_Manual_guide/node00E6.html#line34">LockPubScreen()</a>,
    <a href="../Libraries_Manual_guide/node033C.html#line19">GetVPModeID()</a>, and the <a href="../Libraries_Manual_guide/node00E5.html#line74">SA_DisplayID</a> tag for <a href="../Libraries_Manual_guide/node00DF.html#line6">OpenScreenTags()</a>.

  * Using combined RAWKEY and VANILLAKEY now gives <a href="../Libraries_Manual_guide/node01E1.html">VANILLAKEY</a> messages
    for regular keys, and <a href="../Libraries_Manual_guide/node01E1.html#line19">RAWKEY</a> messages for special keys (fkeys, help,
    etc.)

  * Moving a <a href="../Libraries_Manual_guide/node0125.html#line110">SIMPLE_REFRESH</a> window does not necessarily cause a
    <a href="../Libraries_Manual_guide/node01E0.html#line7">REFRESHWINDOW</a> event because layers now preserves all the bits it can.

  * Sizing a <a href="../Libraries_Manual_guide/node0125.html#line110">SIMPLE_REFRESH</a> window will not clear it.

  * <a href="../Libraries_Manual_guide/node01DE.html#line6">MENUVERIFY</a>/<a href="../Libraries_Manual_guide/node01DF.html#line8">REQVERIFY</a>/<a href="../Libraries_Manual_guide/node01E0.html#line28">SIZEVERIFY</a> can time out if you take too long to
    <a href="../Libraries_Manual_guide/node02F3.html">ReplyMsg()</a>.

  * Menu-key equivalents are ignored while string gadgets are active.

  * You can't type control characters into string gadgets by default.
    Use Ctrl-Amiga-char to type them in or use IControl Prefs to change
    the default behavior.

  * Width and Height parameters of <a href="../Libraries_Manual_guide/node01B4.html#line21">AutoRequest()</a> are ignored.

  * New default colors, new gadget images.

  * JAM1 rendering/text in border may be invisible gadgets over default
    colors.

  * The cursor for string gadgets can no longer reside outside the
    cleared container area.  If your gadget is 32 pixels wide, with
    <a href="../Libraries_Manual_guide/node016B.html#line49">MaxChars</a> of 4, all 32 pixels will be cleared, instead of just 24, as
    was true in 1.3.

  * Applications and requesters that fail to specify desired fonts will
    get the fonts the user sets up in Font Preferences in Release 2.
    These could be much larger, or proportional in some cases.  Screen
    and window titlebars (and their gadgets) will be taller when
    accommodating a larger font.  Applications which open on the
    Workbench screen must adapt to variable size titlebars.  Any
    application which accepts system defaults for its screen, window,
    menu, Text or <a href="../Libraries_Manual_guide/node01C7.html">IntuiText</a> fonts must adapt to different fonts and
    titlebar sizes.  String gadgets whose height is too small for a font
    will revert to a smaller ROM font.  There are now 2 different
    user-specifiable default system fonts which affect different
    Intuition features.  This can lead to mismatches in mixed gadgets and
    text.  See the &#034;<a href="../Libraries_Manual_guide/node00E5.html#line130">Intuition Screens</a>&#034; chapter.

  * Don't modify gadgets directly without first removing them from the
    gadget list, unless you are using a system function designed for that
    purpose, such as <a href="../Libraries_Manual_guide/node0163.html">NewModifyProp()</a> or <a href="../Libraries_Manual_guide/node0205.html#line5">SetGadgetAttrs()</a>.

  * Don't rely on <a href="../Libraries_Manual_guide/node0163.html">NewModifyProp()</a> to fully refresh your prop gadget after
    you've changed values in the structure.  NewModifyProp() will only
    correctly refresh changes which were passed to it as parameters.  Use
    <a href="../Libraries_Manual_guide/node0133.html#line27">Remove</a>/<a href="../Libraries_Manual_guide/node0133.html#line7">Add</a>/<a href="../Libraries_Manual_guide/node0146.html">RefreshGList()</a> for other kinds of changes.

  * Custom screens must be of type CUSTOMSCREEN or PUBLICSCREEN.  Other
    types are illegal.  One application opens its screen with
    <a href="../Libraries_Manual_guide/node00E5.html#line183">NewScreen.Type</a> = 0 (instead of <a href="../Libraries_Manual_guide/node00E5.html#line183">CUSTOMSCREEN</a>, 0x0F).  Then, when it
    opens its windows, it specifies <a href="../Libraries_Manual_guide/node0102.html#line20">NewWindow</a>.Type of 0 and
    NewWindow.Screen of NULL, instead of Type = <a href="../Libraries_Manual_guide/node0124.html#line91">CUSTOMSCREEN</a> and
    Screen = (their screen). That happened to work before, but no longer.

  * Referencing <a href="../Libraries_Manual_guide/node01D9.html#line73">IntuiMessage-&#062;IAddress</a> as a <a href="../Libraries_Manual_guide/node0149.html">Gadget</a> pointer on non-Gadget
    IDCMP messages, or as a <a href="../Libraries_Manual_guide/node0121.html">Window</a> pointer (rather than looking at the
    proper field <a href="../Libraries_Manual_guide/node01D9.html#line101">IntuiMessage-&#062;IDCMPWindow</a>) may now cause Enforcer hits
    or crashes.  The IAddress field always used to contain a pointer of
    some type even for IDCMP events for which no IAddress value is
    documented.  Now, for some IDCMP events, IAddress may contain a
    non-address, possibly an odd value that would crash a 68000 based
    system).

  * Using Intuition flags in the wrong structure fields (for example,
    using ACTIVEWINDOW instead of ACTIVATE).  To alleviate this problem,
    2.0 has introduced new synonyms that are less confusing than the old
    ones.  For example, <a href="../Libraries_Manual_guide/node01E0.html#line36">IDCMP_ACTIVEWINDOW</a> and <a href="../Libraries_Manual_guide/node0125.html#line90">WFLG_ACTIVATE</a>.  This
    particular example of confusion (there are several) was the nastiest,
    since IDCMP_ACTIVEWINDOW, when stuffed into NewWindow.Flags,
    corresponds numerically to <a href="../Libraries_Manual_guide/node0123.html">WFLG_NW_EXTENDED</a>, which informs Intuition
    that the <a href="../Libraries_Manual_guide/node0102.html#line20">NewWindow</a> structure is immediately followed by a <a href="../Libraries_Manual_guide/node0497.html">TagItem</a>,
    list which isn't there!  Intuition does some validation on the
    tag-list pointer, in order to partially compensate.  To make your
    compiler use the new synonyms only, add this line to your code before
    Intuition include files: #define INTUI_V36_NAMES_ONLY.

  * Do not place spaces into the <a href="../Libraries_Manual_guide/node016B.html#line19">StringInfo-&#062;Buffer</a> of a <a href="../Libraries_Manual_guide/node014B.html#line91">GACT_LONGINT</a>
    string gadget. Under 1.3, this worked, but the 2.0 validation routine
    that checks for illegal keystrokes looks at the contents for illegal
    (i.e., non-numeric) characters, and if any are found assumes that the
    user typed an illegal keystroke.  The user's only options may be
    shift-delete or Amiga-X. Use the correct justification instead.

  * If you specify NULL for a font in an <a href="../Libraries_Manual_guide/node01C7.html">IntuiText</a>, don't assume you'll
    get Topaz 8.  Either explicitly supply the font you you need or be
    prepared to size accordingly.  Otherwise, your rendering will be
    wrong, and the user will have to reset his Preferences just to make
    your software work right.

  * Window borders are now drawn in the screen's DetailPen and BlockPen
    rather than the Window's pens.  For best appearance, you should pass
    an <a href="../Libraries_Manual_guide/node00E5.html#line82">SA_Pens</a> array to <a href="../Libraries_Manual_guide/node00DF.html#line6">OpenScreen()</a>. This can be done in a backwards
    compatible manner with the <a href="../Libraries_Manual_guide/node00DE.html#line6">ExtNewScreen</a> structure and the <a href="../Libraries_Manual_guide/node00E1.html#line15">NS_EXTENDED</a>
    flag.

  * The system now renders into the full width of window borders,
    although the widths themselves are unchanged.  Window borders are
    filled upon activation and inactivation.

  * Window border rendering has changed significantly for 2.0.  Note that
    the border dimensions are unchanged from 1.x (Look at
    <a href="../Libraries_Manual_guide/node0121.html#line71">Window-&#062;BorderLeft/Top/Right/Bottom</a> if you don't believe us!).  If
    your gadget intersects the border area, although it may have looked
    OK under 1.3, a visual conflict may occur under 2.0.  If Intuition
    notices a gadget which is substantially in the border but not
    declared as such, it treats it as though it were (this is called
    &#034;bordersniffing&#034;).  Never rely on Intuition to sniff these out for
    you; always declare them explicitly (see the Gadget Activation flags
    <a href="../Libraries_Manual_guide/node014B.html#line56">GACT_RIGHTBORDER</a>, etc.).  See &#034;<a href="../Libraries_Manual_guide/node0575.html">Intuition Gadgets and Window Borders</a>&#034;
    in the &#034;Additional Information&#034; section below.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
