<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_11" NODE="11-2-1" TITLE="11 / Easy Memory Allocation and Deallocation / Helps You Remember" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>11 / Easy Memory Allocation and Deallocation / Helps You Remember</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node01F7.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node01F9.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
The <a href="../Includes_and_Autodocs_2._guide/node01FE.html">AllocRemember()</a> routine calls the Exec <a href="../Libraries_Manual_guide/node02A7.html">AllocMem()</a> function to perform
the memory allocation.  (Of course, the application may directly call Exec
<a name="line4">memory functions, see the chapter &#034;<a href="../Libraries_Manual_guide/node02A6.html">Exec Memory Allocation</a>&#034; for details.)</a>

<a href="../Includes_and_Autodocs_2._guide/node01FE.html">AllocRemember()</a> performs two allocations each time it is called.  The
first allocation is the actual memory requested by the application.  This
memory is of the size and type specified in the call and is independent of
the second block of memory.  The second allocation is memory for a
<a href="../Libraries_Manual_guide/node01FA.html">Remember</a> structure which is used to save the specifics of the allocation
in a linked list.  When <a href="../Includes_and_Autodocs_2._guide/node0217.html">FreeRemember()</a> is called it uses the information
in this linked list to free all previous memory allocations at once.  This
is convenient since normally you would have to free each memory block one
at a time which requires knowing the size and base address of each one.

The <a href="../Includes_and_Autodocs_2._guide/node01FE.html">AllocRemember()</a> call takes three arguments:

    APTR AllocRemember( struct Remember **rememberKey, unsigned long size,
                        unsigned long flags );

The rememberKey is the address of a pointer to a <a href="../Libraries_Manual_guide/node01FA.html">Remember</a> structure.  Note
that this is a double indirection, not just a simple pointer.  The size is
the size, in bytes, of the requested allocation.  The flags argument is
the specification for the memory allocation.  These are the same as the
specifications for the Exec <a href="../Libraries_Manual_guide/node02A7.html">AllocMem()</a> function described in the chapter
on &#034;<a href="../Libraries_Manual_guide/node02A6.html">Exec Memory Allocation</a>&#034;.

If <a href="../Includes_and_Autodocs_2._guide/node01FE.html">AllocRemember()</a> succeeds, it returns the address of the allocated
<a name="line29">memory block.  It returns a NULL if the allocation fails.</a>

The <a href="../Includes_and_Autodocs_2._guide/node0217.html">FreeRemember()</a> function gives the option of freeing memory in either
of two ways.  The first (and most useful) option is to free both the link
nodes that <a href="../Includes_and_Autodocs_2._guide/node01FE.html">AllocRemember()</a> created and the memory blocks to which they
correspond.  The second option is to free only the link nodes, leaving the
memory blocks for further use (and later deallocation via Exec's <a href="../Libraries_Manual_guide/node02A7.html#line11">FreeMem()</a>
function).  But, as a general rule, the application should never free only
the link nodes as this can greatly fragment memory.  If the link nodes are
not required, use the Exec memory allocation functions.

The <a href="../Includes_and_Autodocs_2._guide/node0217.html">FreeRemember()</a> call is as follows:

    void FreeRemember( struct Remember **rememberKey, long reallyForget );

Set the rememberKey argument to the address of a pointer to a <a href="../Libraries_Manual_guide/node01FA.html">Remember</a>
structure.  This is the same value that was passed to previous calls to
<a href="../Includes_and_Autodocs_2._guide/node01FE.html">AllocRemember()</a>.  The reallyForget argument is a boolean that should be
set to TRUE.  If TRUE, then both the link nodes and the memory blocks are
freed.  If FALSE, then only the link nodes are freed.  Again, applications
should avoid using the FALSE value since it can lead to highly fragmented
memory.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
