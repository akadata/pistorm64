<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_15" NODE="15-3-8-8" TITLE="15 / / The Kinds of GadTools Gadgets / Listview Gadgets" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>15 / / The Kinds of GadTools Gadgets / Listview Gadgets</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node0266.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node0268.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
Listview gadgets (LISTVIEW_KIND) are scrolling lists.  They consist of a
scroller with arrows, an area where the list itself is visible and
optionally a place where the current selection is displayed, which may be
editable.  The user can browse through the list using the scroller or its
arrows and may select an entry by clicking on that item.

<a name="line8">There are a number of tags that are used with listviews:</a>

GTLV_Labels (struct List *)
    An Exec list whose nodes' <a href="../Libraries_Manual_guide/node02D9.html#line38">ln_Name</a> fields are to be displayed as items
    in the scrolling list.  If the list is empty, an empty <a href="../Libraries_Manual_guide/node02DB.html#line23">List</a> structure
    or a NULL value may be used for GTLV_Labels.  This tag accepts a
    value of &#034;~0&#034; to detach the list from the listview, defined below.
<a name="line15">    The default is NULL.  (Create and set.)</a>

GTLV_Top (UWORD)
    The ordinal number of the top item visible in the listview.  The
<a name="line19">    default is zero.  (Create and set.)</a>

GTLV_ReadOnly (BOOL)
    Set this to TRUE for a read-only listview, which the user can browse,
    but not select items from.  A read-only listview can be recognized
    because the list area is recessed, not raised.  The default is FALSE.
<a name="line25">    (Create only.)</a>

GTLV_ScrollWidth (UWORD)
    The width of the scroller to be used in the listview.  Any value
    specified must be reasonably bigger than zero.  The default is 16.
<a name="line30">    (Create only.)</a>

GTLV_ShowSelected (struct Gadget *)
    Use this tag to show the currently selected entry displayed
    underneath the listview.  Set its value to NULL to get a read-only
    (<a href="../Libraries_Manual_guide/node0269.html">TEXT_KIND</a>) display of the currently selected entry or set it to a
    pointer to an already-created GadTools <a href="../Libraries_Manual_guide/node0261.html">STRING_KIND</a> gadget to allow
    the user to directly edit the current entry.  By default, there is no
<a name="line38">    display of the currently selected entry.  (Create only.)</a>

GTLV_Selected (UWORD)
    Ordinal number of the item to be placed into the display of the
    current selection under the listview.  This tag is ignored if
    GTLV_ShowSelected is not used.  Set it to &#034;~0&#034; to have no current
<a name="line44">    selection.  The default is &#034;~0&#034;.  (Create and set.)</a>

LAYOUTA_Spacing (UWORD)
    Extra space, in pixels, to be placed between the entries in the
    listview.  The default is zero.  (Create only.)

The program will only hear from a listview when the user selects an item
from the list.  The program will then receive an <a href="../Libraries_Manual_guide/node01DD.html#line6">IDCMP_GADGETUP</a>
<a href="../Libraries_Manual_guide/node01D9.html">IntuiMessage</a>.  This message will contain the ordinal number of the item
within the list that was selected in the <a href="../Libraries_Manual_guide/node01D9.html#line33">Code</a> field of the message.  This
number is independent of the displayed listview, it is the offset from the
start of the list of items.

If the program attaches a display gadget by using the <a href="../Libraries_Manual_guide/node0497.html">TagItem</a>
{GTLV_ShowSelected, NULL}, then whenever the user clicks on an entry in
the listview it will be copied into the display gadget.

If the display gadget is to be editable, then the program must first
create a GadTools <a href="../Libraries_Manual_guide/node0261.html">STRING_KIND</a> gadget whose width matches the width of the
listview.  The <a href="../Libraries_Manual_guide/node0497.html">TagItem</a> {GTLV_ShowSelected, stringgad} is used to install
the editable gadget, where stringgad is the pointer returned by
<a href="../Libraries_Manual_guide/node025A.html">CreateGadget()</a>.  When the user selects any entry from the listview, it
gets copied into the string gadget.  The user can edit the string and the
program will hear normal string gadget <a href="../Libraries_Manual_guide/node01DD.html#line6">IDCMP_GADGETUP</a> messages from the
STRING_KIND gadget.

The Exec <a href="../Libraries_Manual_guide/node02DB.html#line23">List</a> and its <a href="../Libraries_Manual_guide/node02D9.html#line19">Node</a> structures may not be modified while they are
attached to the listview, since the list might be needed at any time.  If
the program has prepared an entire new list, including a new List
structure and all new nodes, it may replace the currently displayed list
in a single step by calling <a href="../Libraries_Manual_guide/node025E.html">GT_SetGadgetAttrs()</a> with the <a href="../Libraries_Manual_guide/node0497.html">TagItem</a>
{GTLV_Labels, newlist}.  If the program needs to operate on the list that
has already been passed to the listview, it should detach the list by
setting the GTLV_Labels attribute to &#034;~0&#034;.  When done modifying the list,
resubmit it by setting GTLV_Labels to once again point to it.  This is
better than first setting the labels to NULL and later back to the list,
since setting GTLV_Labels to NULL will visually clear the listview.  If
the GTLV_Labels attribute is set to &#034;~0&#034;, the program is expected to set
it back to something determinate, either a list or NULL, soon after.

The height specified for the listview will determine the number of lines
in the list area.  When creating a listview, it will be no bigger than the
size specified in the <a href="../Libraries_Manual_guide/node0259.html">NewGadget</a> structure.  The size will include the
current-display gadget, if any, that has been requested via the
GTLV_ShowSelected tag.  The listview may end up being less tall than the
application asked for, since the calculated height assumes an integral
number of lines in the list area.

By default, the gadget label will be placed above the listview.  This may
be overridden using <a href="../Libraries_Manual_guide/node0259.html#line27">ng_Flags</a>.

Currently, a listview may not be disabled.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
