<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_29" NODE="29-2-1" TITLE="29 / The Text Function / Choosing the Font" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>29 / The Text Function / Choosing the Font</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node03D5.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node03D7.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
The graphics.library function <a href="../Includes_and_Autodocs_2._guide/node0479.html">SetFont()</a> changes the rastport's current
font:

<a name="line5">    void SetFont( struct RastPort *myrp, struct TextFont *mytf );</a>

The parameter mytf is a pointer to an open, valid <a href="../Libraries_Manual_guide/node03DE.html">TextFont</a> structure.  The
system uses the TextFont structure to keep track of fonts (The TextFont
structure is discussed in detail later in this chapter).  The <a href="../Includes_and_Autodocs_2._guide/node0462.html">OpenFont()</a>
(from graphics.library) and <a href="../Includes_and_Autodocs_2._guide/node01F7.html">OpenDiskFont()</a> (from diskfont.library)
functions both return a pointer to a valid TextFont structure.  The
OpenFont() function will only open fonts that have already been loaded and
are currently in the system list.  Normally applications use the
OpenDiskFont() call instead of OpenFont() because OpenDiskFont() can load
and open fonts from disk as well as open those that are already in the
system list.

Here are prototypes for these functions:

    struct TextFont *OpenDiskFont( struct TextAttr *mytextAttr );
<a name="line21">    struct TextFont *OpenFont( struct TextAttr *mytextAttr );</a>

The mytextAttr argument  points to a TextAttr structure that describes the
requested font.  The TextAttr structure (from &#060;graphics/<a href="../Includes_and_Autodocs_2._guide/node00A8.html#line65">text.h</a>&#062;) looks
like this:

    struct TextAttr {
        STRPTR  ta_Name;            /* name of the font */
        UWORD   ta_YSize;           /* height of the font */
        UBYTE   ta_Style;           /* intrinsic font style */
        UBYTE   ta_Flags;           /* font preferences and flags */
<a name="line32">    };</a>

where ta_Name is a string naming the font to open, ta_YSize is the point
size of the font (normally in pixels), ta_Style is a bitfield describing
the font style, and ta_Flags is a bitfield that further describes
characteristics of the font.  Note that the name of the font can either be
the font name alone (&#060;font name&#062;.font) or it can be prepended with a full
path.  Without a path to the font, if the font is not already loaded into
the system list, <a href="../Includes_and_Autodocs_2._guide/node01F7.html">OpenDiskFont()</a> will look in the FONTS: directory for the
font file.  If there is a path, OpenDiskFont() will look in that directory
for the font files, allowing the user to put fonts in any directory
(although this is discouraged).  <a href="../Includes_and_Autodocs_2._guide/node0462.html">OpenFont()</a> and OpenDiskFont() try to find
a font that matches your TextAttr description.  An important thing to
remember about OpenDiskFont() is that only a process can call it (as
opposed to a task).  This is primarily because the function has to use
<a name="line47">dos.library to scan disks for font files.</a>

The font styles for ta_Style (from &#060;graphics/<a href="../Includes_and_Autodocs_2._guide/node00A8.html#line26">text.h</a>&#062;) are:


    FSF_UNDERLINED      The font is underlined
    FSF_BOLD            The font is bolded
    FSF_ITALIC          The font is italicized
    FSF_EXTENDED        The font is extra wide
<a name="line56"></a>

The flags for ta_Flags (from &#060;graphics/<a href="../Includes_and_Autodocs_2._guide/node00A8.html#line42">text.h</a>&#062;) are:


    FPF_ROMFONT       This font is built into the ROM (currently, only
                      Topaz-8 and Topaz-9 are ROM fonts).
    FPF_DISKFONT      This font was loaded from disk (with
                      diskfont.library)
    FPF_REVPATH       This font is designed to be printed from from right
                      to left (Hebrew is written from right to left)
    FPF_TALLDOT       This font was designed for a Hires screen (640x200
                      NTSC, non-interlaced)
    FPF_WIDEDOT       This font was designed for a Lores Interlaced screen
<a name="line70">                      (320x400 NTSC)</a>
    FPF_PROPORTIONAL  The character widths of this font are not constant
    FPF_DESIGNED      This font size was explicitly designed at this size
                      rather than constructed.  If you do not set this bit
                      in your TextAttr, then the system may generate a
                      font for you by scaling an existing ROM or disk font
                      (under V36 and above).


For example to open an 11 point bold, italic Topaz font, the code would
look something like this:

     <a href="../Libraries_Manual_guide/node05BB.html">pseudotext.c</a> 

The example above uses the graphics.library's <a href="../Includes_and_Autodocs_2._guide/node0479.html">SetFont()</a> function to change
the rastport's current font.  Notice that this example restores the
rastport's original font (myrp-&#062;Font) before exiting.  This isn't normally
necessary unless some other process assumes the rastport's font (or other
drawing attributes) will not change.  Intuition does not rely on the
window's RPort.Font field for rendering or closing the default window
<a name="line90">font, so applications can change that font without having to restore it.</a>

Prior to Release 2, some applications assumed that any window they opened
would always use Topaz-8 without bothering to explicitly set it.  Since
Topaz-8 was the normal default font before Release 2, this was usually not
a problem.  However, under Release 2 and later versions of the OS, the
user can easily change the default system fonts with the Font Preferences
editor.  Hence, applications that make assumptions about the size of the
default font look terrible under Release 2 (and in some cases are
unusable).  Program designers should not make assumptions about the system
font, and wherever possible, honor the user font preferences.  See the
&#034;<a href="../Libraries_Manual_guide/node0221.html">Preferences</a>&#034; chapter of this manual for more information on how to find
user preferences.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
