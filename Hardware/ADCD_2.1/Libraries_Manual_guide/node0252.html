<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_15" NODE="15-2-3-2" TITLE="15 / / Functions for GadTools Menus / Layout of the Menus" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>15 / / Functions for GadTools Menus / Layout of the Menus</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node0251.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node0253.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
The <a href="../Libraries_Manual_guide/node0199.html">Menu</a> and <a href="../Libraries_Manual_guide/node019A.html">MenuItem</a> structures returned by <a href="../Libraries_Manual_guide/node0251.html">CreateMenus()</a> contain no size
or positional information.  This information is added in a separate layout
step, using <a href="../Includes_and_Autodocs_2._guide/node03F8.html">LayoutMenus()</a>.  As with the other tag-based functions, the
program may call either LayoutMenus() or <a href="../Includes_and_Autodocs_2._guide/node03F8.html">LayoutMenusA()</a>.

    BOOL LayoutMenusA( struct Menu *firstmenu, APTR vi,
                       struct TagItem *taglist );
    BOOL LayoutMenus( struct Menu *firstmenu, APTR vi, Tag tag1, ... );

Set firstmenu to a pointer to a <a href="../Libraries_Manual_guide/node0199.html">Menu</a> structure returned by a previous call
to <a href="../Libraries_Manual_guide/node0251.html">CreateMenus()</a>.  The vi argument is a a <a href="../Libraries_Manual_guide/node026C.html#line12">VisualInfo</a> handle obtained from
<a href="../Libraries_Manual_guide/node026C.html">GetVisualInfo()</a>.  See the documentation of GadTools gadgets below for more
about this call.  For the tag arguments, tag1 or taglist, <a href="../Includes_and_Autodocs_2._guide/node03F8.html">LayoutMenus()</a>
<a name="line15">recognizes a single tag:</a>

GTMN_TextAttr
    A pointer to an openable font (<a href="../Libraries_Manual_guide/node03D6.html#line21">TextAttr</a> structure) to be used for the
    menu item and sub-item text.  The default is to use the screen's font.

<a href="../Includes_and_Autodocs_2._guide/node03F8.html">LayoutMenus()</a> fills in all the size, font and position information for the
menu strip.  LayoutMenus() returns TRUE if successful and FALSE if it
fails.  The usual reason for failure is that the font supplied cannot be
opened.

<a href="../Includes_and_Autodocs_2._guide/node03F8.html">LayoutMenus()</a> takes care of calculating the width, height and position of
each individual menu item and sub-item, as well as the positioning of all
menus and sub-menus.  In the event that a menu would be too tall for the
screen, it is broken up into multiple columns.  Additionally, whole menus
may be shifted left from their normal position to ensure that they fit on
screen.  If a large menu is combined with a large font, it is possible,
even with columnization and shifting, to create a menu too big for the
screen.  GadTools does not currently trim off excess menus, items or
sub-items, but relies on Intuition to clip menus at the edges of the
screen.

It is perfectly acceptable to change the menu layout by calling
<a href="../Libraries_Manual_guide/node0181.html#line11">ClearMenuStrip()</a> to remove the menus, then <a href="../Includes_and_Autodocs_2._guide/node03F8.html">LayoutMenus()</a> to make the
change and then <a href="../Libraries_Manual_guide/node0181.html">SetMenuStrip()</a> to display the new layout.  Do this when
changing the menu's font (this can be handled by a tag to LayoutMenus()),
or when updating the menu's text (to a different language, for instance).
Run-time language switching in menus will be discussed later.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
