<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_9" NODE="9-5-4" TITLE="9 / Using the IDCMP / IntuiMessages" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>9 / Using the IDCMP / IntuiMessages</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node01D8.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node01DA.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
The <a href="../Includes_and_Autodocs_2._guide/node00D4.html#line568">IntuiMessage</a> structure is an Exec Message that has been extended to
include Intuition specific information.  The ExecMessage field in the
IntuiMessage is an actual instance of a <a href="../Libraries_Manual_guide/node02EF.html">Message</a> structure and is used by
Exec to manage the transmission of the message.  The Intuition extensions
of the IntuiMessage are used to transmit specialized Intuition data to the
program.

    struct IntuiMessage
        {
        struct Message ExecMessage;
        ULONG Class;
        UWORD Code;
        UWORD Qualifier;
        APTR IAddress;
        WORD MouseX, MouseY;
        ULONG Seconds, Micros;
        struct Window *IDCMPWindow;
        struct IntuiMessage *SpecialLink;
        };

The IntuiMessage structure fields are as follows:

ExecMessage
    This field is maintained by Exec.  It is used for linking the message
    into the system and broadcasting it to a message port.  See the
    chapter &#034;<a href="../Libraries_Manual_guide/node02EF.html">Exec Messages and Ports</a>&#034; for more information on the <a href="../Libraries_Manual_guide/node02EF.html">Message</a>
<a name="line28">    structure and its use.</a>

Class
    Class contains the IDCMP type of this specific message.  By comparing
    the Class field to the IDCMP flags, the application can determine the
<a name="line33">    type of this message.  Each message may only have a single IDCMP type.</a>

Code
    Code contains data set by Intuition, such as menu numbers or special
    code values.  The meaning of the Code field changes depending on the
    IDCMP type, or Class, of the message.  Often the code field will
    simply contain a copy of the code of the input event which generated
<a name="line40">    this IntuiMessage.</a>

    For example, when the message is of class <a href="../Libraries_Manual_guide/node01E1.html#line19">IDCMP_RAWKEY</a>, Code contains
    the raw key code generated by the keyboard device.  When the message
    is of class <a href="../Libraries_Manual_guide/node01E1.html">IDCMP_VANILLAKEY</a>, Code contains the key mapped ASCII
<a name="line45">    character.</a>

Qualifier
    This contains a copy of the ie_Qualifier field that is transmitted to
    Intuition by the input device.  This field is useful if your program
    handles raw key codes, since the Qualifier tells the program, for
    instance, whether or not the Shift key or Ctrl key is currently
    pressed.  Check the &#060;devices/<a href="../Includes_and_Autodocs_2._guide/node0051.html#line161">inputevent.h</a>&#062; file for the definitions
<a name="line53">    of the qualifier bits.</a>

MouseX and MouseY
    Every IntuiMessage will have the mouse coordinates in these
    variables.  The coordinates can either be expressed as absolute
    offsets from the upper left corner of the window, or expressed as the
    amount of change since the last reported positions (delta). If
    <a href="../Libraries_Manual_guide/node01DC.html#line57">IDCMP_DELTAMOVE</a> is set, then these numbers will represent delta
    positions from the last position.  All messages will have zero in
    these values except <a href="../Libraries_Manual_guide/node01DC.html#line23">IDCMP_MOUSEMOVE</a> and <a href="../Libraries_Manual_guide/node01DC.html">IDCMP_MOUSEBUTTON</a> events,
    which will have the correct delta values for the movement.  If
    IDCMP_DELTAMOVE is not set, then these numbers are the actual window
<a name="line65">    offset values.</a>

Seconds and Micros
    These values are copies of the current system clock, in seconds and
    microseconds.  They are set when Intuition generates the message.

    Microseconds (Micros) range from zero up to one million minus one.
    The 32 bits allocated to the Seconds variable has enough accuracy to
<a name="line73">    count up to 139 years.  Time is measured from Jan 1, 1978.</a>

IAddress
    Typically this variable contains the address of some Intuition
    object, such as a gadget.  The type of the object depends on the
    Class of the IntuiMessage.  Do not assume that the object is of a
    certain type before checking the Class of the object.

    The IAddress pointer is defined only for the following IDCMP Classes.
    Do not attempt to dereference or otherwise interpret the IAddress
    field of any other type of IntuiMessage.

        IntuiMessage Class  Meaning of IAddress Field
        ------------------  -------------------------
        <a href="../Libraries_Manual_guide/node01DD.html">IDCMP_GADGETDOWN</a>    IAddress points to the gadget.
        <a href="../Libraries_Manual_guide/node01DD.html#line6">IDCMP_GADGETUP</a>      IAddress points to the gadget.
        <a href="../Libraries_Manual_guide/node01E1.html#line19">IDCMP_RAWKEY</a>        IAddress points to the dead-key information.
        <a href="../Libraries_Manual_guide/node01E1.html#line98">IDCMP_IDCMPUPDATE</a>   IAddress points to a tag item list.
        Other classes       No meaning.

<a name="line93">    In particular, for <a href="../Libraries_Manual_guide/node01DC.html#line23">IDCMP_MOUSEMOVE</a> IntuiMessages emanating from</a>
    <a href="../Libraries_Manual_guide/node014B.html#line40">GACT_FOLLOWMOUSE</a> gadgets, the IAddress field does not point to the
    gadget.  Interpreting the IAddress as a gadget pointer and trying to
    access the gadget's fields before ascertaining that the event is an
    <a href="../Libraries_Manual_guide/node01DD.html#line6">IDCMP_GADGETUP</a> or <a href="../Libraries_Manual_guide/node01DD.html">IDCMP_GADGETDOWN</a> event is incorrect, and can lead
    to subtle or serious problems.

    (Note that GadTools gadgets do arrange for the IAddress to point to
<a name="line101">    the gadget when <a href="../Libraries_Manual_guide/node01DC.html#line23">IDCMP_MOUSEMOVE</a> messages appear).</a>

IDCMPWindow
    Contains the address of the window to which this message was sent.
    If the application is sharing the window's <a href="../Libraries_Manual_guide/node01D6.html#line16">UserPort</a> between multiple
    windows, IDCMPWindow allows it to determine which of the windows the
<a name="line107">    message was sent to.</a>

SpecialLink
    For system use only.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
