<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_28" NODE="28-7-3" TITLE="28 / / Adding User Extensions To Gel Data Structures" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>28 / / Adding User Extensions To Gel Data Structures</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node03B6.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node03B8.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
This section describes how to expand the size and scope of the <a href="../Libraries_Manual_guide/node0381.html">VSprite</a>,
<a href="../Libraries_Manual_guide/node0398.html">Bob</a> and <a href="../Libraries_Manual_guide/node03B9.html#line34">AnimOb</a> data structures.  In the definition for these structures,
there is an item called UserExt at the end of each.  If you want to expand
these structures (to hold your own special data), you define the UserExt
member before the &#060;graphics/<a href="../Includes_and_Autodocs_2._guide/node00C3.html">gels.h</a>&#062; file is included.  If this member has
already been defined when the &#060;graphics/gels.h&#062; file is parsed,  the
compiler preprocessor will extend the structure definition automatically.
If these members have not been defined, the system will make them SHORTs,
and you may still consider these as being reserved for your private use.

To show the kind of use you can make of this feature, the example below
adds speed and acceleration figures to each GEL by extending the <a href="../Libraries_Manual_guide/node0381.html">VSprite</a>
structure.  When your collision routine is called, it could use these
values to transfer energy between the two colliding objects (say, billiard
balls).  You would have to set up additional routines, executed between
calls to <a href="../Libraries_Manual_guide/node03D1.html#line16">DoCollision()</a>, that would add the values to the GELs position
appropriately.  You could do this with code similar o the following:

     struct myInfo
         {
         short xvelocity;
         short yvelocity;
         short xaccel;
         short yaccel;
<a name="line26">         };</a>

These members are for example only.  You may use any definition for your
user extensions.  You would then also provide the following line, to
extend the <a href="../Libraries_Manual_guide/node0381.html">VSprites</a> structure, use:

     /* Redefine VUserStuff for my own use. */
<a name="line33">     #define VUserStuff struct myInfo</a>

To extend the <a href="../Libraries_Manual_guide/node0398.html">Bob</a>s structure, use:

     #define BUserStuff struct myInfo

To extend the <a href="../Libraries_Manual_guide/node03B9.html#line34">AnimOb</a>s structure, use:

     #define AUserStuff struct myInfo

When the system is compiling the &#060;graphics/<a href="../Includes_and_Autodocs_2._guide/node00C3.html">gels.h</a>&#062; file with your program,
the compiler preprocessor substitutes &#034;struct myInfo&#034; everywhere that
UserExt is used in the header. The structure is thereby customized to
include the items you wish to associate with it.

    Typedef Cannot Be Used.
    -----------------------
    You cannot use the C-language construct typedef for the above
    statements.  If you want to substitute your own data type for one of
    the UserStuff variables, you must use a #define.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
