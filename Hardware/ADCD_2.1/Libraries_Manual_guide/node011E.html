<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Libraries/Lib_4" NODE="4-5-4" TITLE="4 / Preserving the Window Display / Optimized Window Refreshing" INDEX="Libraries/Lib_Index/MAIN" -->
<head>
<title>4 / Preserving the Window Display / Optimized Window Refreshing</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Libraries_Manual_guide/node002C.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Libraries_Manual_guide/node011D.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Libraries_Manual_guide/node011F.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
Bracketing the display updating in the <a href="../Libraries_Manual_guide/node011E.html">BeginRefresh()</a>/<a href="../Libraries_Manual_guide/node011E.html#line25">EndRefresh()</a> pair
automatically restricts all rendering to the &#034;damaged&#034; areas.

    void BeginRefresh( struct Window *window );
    void EndRefresh  ( struct Window *window, long complete );

These functions makes sure that refreshing is done in the most efficient
way, only redrawing those portions of the window that really need to be
<a name="line10">redrawn.  The rest of the rendering commands are discarded.</a>

Operations performed between the <a href="../Libraries_Manual_guide/node011E.html">BeginRefresh()</a>/<a href="../Libraries_Manual_guide/node011E.html#line25">EndRefresh()</a> pair should
be restricted to simple rendering.  All of the rendering functions in
Intuition library and Graphics library are safe.  Calls to
<a href="../Libraries_Manual_guide/node0177.html#line5">RefreshGadgets()</a> are not permitted.  Avoid calls that may lock the
<a href="../Includes_and_Autodocs_2._guide/node00C4.html#line33">LayerInfo</a>, or get complicated in Intuition, since BeginRefresh() leaves
the window's layer or layers locked.  Avoid <a href="../Libraries_Manual_guide/node01B4.html#line21">AutoRequest()</a>, and therefore
all direct or indirect disk related DOS calls.  See the
&#034;<a href="../Libraries_Manual_guide/node0143.html#line10">Intuition Gadgets</a>&#034; chapter for more information on gadget restrictions
<a name="line20">with BeginRefresh()/EndRefresh().</a>

Certain applications do not need to receive refresh events, and can avoid
having to call <a href="../Libraries_Manual_guide/node011E.html">BeginRefresh()</a> and <a href="../Libraries_Manual_guide/node011E.html#line25">EndRefresh()</a> by setting the
WFLG_NOCAREREFRESH flag or the <a href="../Libraries_Manual_guide/node0125.html#line62">WA_NoCareRefresh</a> tag in the
<a name="line25"><a href="../Libraries_Manual_guide/node0103.html">OpenWindowTagList()</a> call.</a>

The <a href="../Libraries_Manual_guide/node011E.html#line25">EndRefresh()</a> function takes a boolean value as an argument (complete
in the prototype above).  This value determines whether refreshing is
completely finished.  When set to FALSE, further refreshing may be
performed between subsequent <a href="../Libraries_Manual_guide/node011E.html">BeginRefresh()</a>/ EndRefresh() pairs.  Set the
<a name="line31">boolean to TRUE for the last call to EndRefresh().</a>

It is critical that applications performing multiple
<a href="../Libraries_Manual_guide/node011E.html">BeginRefresh()</a>/<a href="../Libraries_Manual_guide/node011E.html#line25">EndRefresh()</a> pairs using EndRefresh(win,FALSE) hold layers
locked through the entire process.  The layer lock may only be released
after the final call to EndRefresh(win,TRUE). See the &#034;<a href="../Libraries_Manual_guide/node03EC.html">Layers Library</a>&#034; for
<a name="line37">more details.</a>

The procedures outlined in this section take care of refreshing what is
inside the window.  Another function named <a href="../Includes_and_Autodocs_2._guide/node0242.html">RefreshWindowFrame()</a> refreshes
window borders, including the title region and gadgets:

    void RefreshWindowFrame( struct Window *window );

Applications can use this function to update window borders after
overwriting them with graphics.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
