<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Includes/devices/serial.h" NODE="MAIN" TITLE="Includes/devices/serial.h" -->
<head>
<title>Includes/devices/serial.h</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_2._guide/node004A.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_2._guide/node004C.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
#ifndef DEVICES_SERIAL_H
#define DEVICES_SERIAL_H
/*
**	$Filename: devices/serial.h $
**	$Release: 2.04 Includes, V37.4 $
**	$Revision: 33.6 $
**	$Date: 90/11/06 $
**
**	external declarations for the serial device
**
**	(C) Copyright 1985-1999 Amiga, Inc.
**	    All Rights Reserved
*/
<a name="line14"></a>
#ifndef   EXEC_IO_H
#include &#034;exec/io.h&#034;
#endif /* EXEC_IO_H */

		   /* array of termination char's */
		   /* to use,see serial.doc setparams */
<a name="line21"></a>
<a name="line22"> struct  IOTArray {</a>
<a name="line23">	ULONG TermArray0;</a>
	ULONG TermArray1;
};

<a name="line27"></a>
#define SER_DEFAULT_CTLCHAR 0x11130000	/* default chars for xON,xOFF */
/* You may change these via SETPARAMS.	At this time, parity is not
   calculated for xON/xOFF characters.	You must supply them with the
   desired parity. */

/******************************************************************/
/* CAUTION !!  IF YOU ACCESS the serial.device, you MUST (!!!!) use an
   IOExtSer-sized structure or you may overlay innocent memory !! */
/******************************************************************/
<a name="line37"></a>
<a name="line38"> struct  IOExtSer {</a>
	struct	 IOStdReq IOSer;

/*     STRUCT	MsgNode
*   0	APTR	 Succ
*   4	APTR	 Pred
*   8	UBYTE	 Type
*   9	UBYTE	 Pri
*   A	APTR	 Name
*   E	APTR	 ReplyPort
*  12	UWORD	 MNLength
*     STRUCT   IOExt
*  14	APTR	 io_Device
*  18	APTR	 io_Unit
*  1C	UWORD	 io_Command
*  1E	UBYTE	 io_Flags
*  1F	UBYTE	 io_Error
*     STRUCT   IOStdExt
*  20	ULONG	 io_Actual
*  24	ULONG	 io_Length
*  28	APTR	 io_Data
*  2C	ULONG	 io_Offset
*
<a name="line61">*  30 */</a>
<a name="line62">   ULONG   io_CtlChar;	  /* control char's (order = xON,xOFF,INQ,ACK) */</a>
<a name="line63">   ULONG   io_RBufLen;	  /* length in bytes of serial port's read buffer */</a>
<a name="line64">   ULONG   io_ExtFlags;   /* additional serial flags (see bitdefs below) */</a>
<a name="line65">   ULONG   io_Baud;	  /* baud rate requested (true baud) */</a>
<a name="line66">   ULONG   io_BrkTime;	  /* duration of break signal in MICROseconds */</a>
<a name="line67">   struct  IOTArray io_TermArray; /* termination character array */</a>
<a name="line68">   UBYTE   io_ReadLen;	  /* bits per read character (# of bits) */</a>
<a name="line69">   UBYTE   io_WriteLen;   /* bits per write character (# of bits) */</a>
<a name="line70">   UBYTE   io_StopBits;   /* stopbits for read (# of bits) */</a>
<a name="line71">   UBYTE   io_SerFlags;   /* see SerFlags bit definitions below  */</a>
   UWORD   io_Status;
};
   /* status of serial port, as follows:
*		   BIT	ACTIVE	FUNCTION
*		    0	 ---	reserved
*		    1	 ---	reserved
*		    2	 high	Connected to parallel &#034;select&#034; on the A1000.
*				Connected to both the parallel &#034;select&#034; and
*				serial &#034;ring indicator&#034; pins on the A500
*				&#038; A2000.  Take care when making cables.
*		    3	 low	Data Set Ready
*		    4	 low	Clear To Send
*		    5	 low	Carrier Detect
*		    6	 low	Ready To Send
*		    7	 low	Data Terminal Ready
*		    8	 high	read overrun
*		    9	 high	break sent
*		   10	 high	break received
*		   11	 high	transmit x-OFFed
*		   12	 high	receive x-OFFed
*		13-15		reserved
*/
<a name="line94"></a>
<a name="line95">#define   SDCMD_QUERY		CMD_NONSTD	/* $09 */</a>
<a name="line96">#define   SDCMD_BREAK	       (CMD_NONSTD+1)	/* $0A */</a>
#define   SDCMD_SETPARAMS      (CMD_NONSTD+2)	/* $0B */

<a name="line99"></a>
<a name="line100">#define SERB_XDISABLED	7	/* io_SerFlags xOn-xOff feature disabled bit */</a>
<a name="line101">#define SERF_XDISABLED	(1&#060;&#060;7)	/*    &#034;     xOn-xOff feature disabled mask */</a>
<a name="line102">#define	SERB_EOFMODE	6	/*    &#034;     EOF mode enabled bit */</a>
<a name="line103">#define	SERF_EOFMODE	(1&#060;&#060;6)	/*    &#034;     EOF mode enabled mask */</a>
<a name="line104">#define	SERB_SHARED	5	/*    &#034;     non-exclusive access bit */</a>
<a name="line105">#define	SERF_SHARED	(1&#060;&#060;5)	/*    &#034;     non-exclusive access mask */</a>
<a name="line106">#define SERB_RAD_BOOGIE 4	/*    &#034;     high-speed mode active bit */</a>
<a name="line107">#define SERF_RAD_BOOGIE (1&#060;&#060;4)	/*    &#034;     high-speed mode active mask */</a>
<a name="line108">#define	SERB_QUEUEDBRK	3	/*    &#034;     queue this Break ioRqst */</a>
<a name="line109">#define	SERF_QUEUEDBRK	(1&#060;&#060;3)	/*    &#034;     queue this Break ioRqst */</a>
<a name="line110">#define	SERB_7WIRE	2	/*    &#034;     RS232 7-wire protocol */</a>
<a name="line111">#define	SERF_7WIRE	(1&#060;&#060;2)	/*    &#034;     RS232 7-wire protocol */</a>
<a name="line112">#define	SERB_PARTY_ODD	1	/*    &#034;     parity feature enabled bit */</a>
<a name="line113">#define	SERF_PARTY_ODD	(1&#060;&#060;1)	/*    &#034;     parity feature enabled mask */</a>
<a name="line114">#define	SERB_PARTY_ON	0	/*    &#034;     parity-enabled bit */</a>
#define	SERF_PARTY_ON	(1&#060;&#060;0)	/*    &#034;     parity-enabled mask */

<a name="line117">/* These now refect the actual bit positions in the io_Status UWORD */</a>
<a name="line118">#define	IO_STATB_XOFFREAD 12	   /* io_Status receive currently xOFF'ed bit */</a>
<a name="line119">#define	IO_STATF_XOFFREAD (1&#060;&#060;12)  /*	 &#034;     receive currently xOFF'ed mask */</a>
<a name="line120">#define	IO_STATB_XOFFWRITE 11	   /*	 &#034;     transmit currently xOFF'ed bit */</a>
<a name="line121">#define	IO_STATF_XOFFWRITE (1&#060;&#060;11) /*	 &#034;     transmit currently xOFF'ed mask */</a>
<a name="line122">#define	IO_STATB_READBREAK 10	   /*	 &#034;     break was latest input bit */</a>
<a name="line123">#define	IO_STATF_READBREAK (1&#060;&#060;10) /*	 &#034;     break was latest input mask */</a>
<a name="line124">#define	IO_STATB_WROTEBREAK 9	   /*	 &#034;     break was latest output bit */</a>
<a name="line125">#define	IO_STATF_WROTEBREAK (1&#060;&#060;9) /*	 &#034;     break was latest output mask */</a>
<a name="line126">#define	IO_STATB_OVERRUN 8	   /*	 &#034;     status word RBF overrun bit */</a>
#define	IO_STATF_OVERRUN (1&#060;&#060;8)	   /*	 &#034;     status word RBF overrun mask */

<a name="line129"></a>
#define	SEXTB_MSPON	1	/* io_ExtFlags. Use mark-space parity, */
<a name="line131">				/*	    instead of odd-even. */</a>
<a name="line132">#define	SEXTF_MSPON	(1&#060;&#060;1)	/*    &#034;     mark-space parity mask */</a>
<a name="line133">#define	SEXTB_MARK	0	/*    &#034;     if mark-space, use mark */</a>
#define	SEXTF_MARK	(1&#060;&#060;0)	/*    &#034;     if mark-space, use mark mask */

<a name="line136"></a>
<a name="line137">#define SerErr_DevBusy	       1</a>
<a name="line138">#define SerErr_BaudMismatch    2 /* baud rate not supported by hardware */</a>
<a name="line139">#define SerErr_BufErr	       4 /* Failed to allocate new read buffer */</a>
<a name="line140">#define SerErr_InvParam        5</a>
<a name="line141">#define SerErr_LineErr	       6</a>
<a name="line142">#define SerErr_ParityErr       9</a>
<a name="line143">#define SerErr_TimerErr       11 /*(See the serial/OpenDevice autodoc)*/</a>
<a name="line144">#define SerErr_BufOverflow    12</a>
<a name="line145">#define SerErr_NoDSR	      13</a>
#define SerErr_DetectedBreak  15


#ifdef DEVICES_SERIAL_H_OBSOLETE
#define SerErr_InvBaud	       3	/* unused */
#define SerErr_NotOpen	       7	/* unused */
#define SerErr_PortReset       8	/* unused */
#define SerErr_InitErr	      10	/* unused */
#define SerErr_NoCTS	      14	/* unused */

/* These defines refer to the HIGH ORDER byte of io_Status.  They have
   been replaced by the new, corrected ones above */
#define	IOSTB_XOFFREAD	4	/* iost_hob receive currently xOFF'ed bit */
#define	IOSTF_XOFFREAD	(1&#060;&#060;4)	/*    &#034;     receive currently xOFF'ed mask */
#define	IOSTB_XOFFWRITE 3	/*    &#034;     transmit currently xOFF'ed bit */
#define	IOSTF_XOFFWRITE (1&#060;&#060;3)	/*    &#034;     transmit currently xOFF'ed mask */
#define	IOSTB_READBREAK 2	/*    &#034;     break was latest input bit */
#define	IOSTF_READBREAK (1&#060;&#060;2)	/*    &#034;     break was latest input mask */
#define	IOSTB_WROTEBREAK 1	/*    &#034;     break was latest output bit */
#define	IOSTF_WROTEBREAK (1&#060;&#060;1) /*    &#034;     break was latest output mask */
#define	IOSTB_OVERRUN	0	/*    &#034;     status word RBF overrun bit */
#define	IOSTF_OVERRUN	(1&#060;&#060;0)	/*    &#034;     status word RBF overrun mask */

#define	IOSERB_BUFRREAD 7	/* io_Flags from read buffer bit */
#define	IOSERF_BUFRREAD (1&#060;&#060;7)	/*    &#034;     from read buffer mask */
#define	IOSERB_QUEUED	6	/*    &#034;     rqst-queued bit */
#define	IOSERF_QUEUED	(1&#060;&#060;6)	/*    &#034;     rqst-queued mask */
#define	IOSERB_ABORT	5	/*    &#034;     rqst-aborted bit */
#define	IOSERF_ABORT	(1&#060;&#060;5)	/*    &#034;     rqst-aborted mask */
#define	IOSERB_ACTIVE	4	/*    &#034;     rqst-qued-or-current bit */
#define	IOSERF_ACTIVE	(1&#060;&#060;4)	/*    &#034;     rqst-qued-or-current mask */
#endif

<a name="line179"></a>
#define SERIALNAME     &#034;serial.device&#034;

#endif /* DEVICES_SERIAL_H */
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
