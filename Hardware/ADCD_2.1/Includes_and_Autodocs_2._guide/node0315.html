<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="AutoDocs/keymap" NODE="MapRawKey()" TITLE="keymap.library/MapRawKey" -->
<head>
<title>keymap.library/MapRawKey</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_2._guide/node0314.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_2._guide/node0316.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

NAME
    MapRawKey -- Decode single raw key input event to an ANSI
                 string. (V36)

SYNOPSIS
    actual = MapRawKey(event, buffer, length, keyMap)
    D0                 A0     A1      D1      A2

    WORD MapRawKey( struct <a href="../Includes_and_Autodocs_2._guide/node0051.html#line198">InputEvent</a> *, STRPTR, WORD,
        struct Keymap * );

FUNCTION
    This console function converts input events of type
    IECLASS_RAWKEY to ANSI bytes, based on the keyMap, and
    places the result into the buffer.

INPUTS
    event -  an <a href="../Includes_and_Autodocs_2._guide/node0051.html#line198">InputEvent</a> structure pointer.  The event list is
        not traversed.
    buffer - a byte buffer large enough to hold all anticipated
        characters generated by this conversion.
    length - maximum anticipation, i.e. the buffer size in bytes.
    keyMap - a <a href="../Includes_and_Autodocs_2._guide/node003A.html#line22">KeyMap</a> structure pointer, or null if the default
        key map is to be used.

RESULT
    actual - the number of characters in the buffer, or -1 if
        a buffer overflow was about to occur.

EXAMPLE
    ...
    #define BUFFERLEN       80    /* length of longest expected mapping /*
    char buffer[BUFFERLEN];
    struct <a href="../Includes_and_Autodocs_2._guide/node0051.html#line198">InputEvent</a> ie;
    ...
        KeymapBase = OpenLibrary(&#034;keymap.library&#034;, 0);
        ...
        ie.ie_Class = IECLASS_RAWKEY;
        ie.ie_SubClass = 0;
        for (;;) {
            WaitPort(window-&#062;UserPort);
            while (im = (struct <a href="../Includes_and_Autodocs_2._guide/node00D4.html#line679">IntuiMessage</a> *) GetMsg(window-&#062;UserPort)) {
                switch (im-&#062;Class) {
                    case RAWKEY:
                        ie.ie_Code = im-&#062;Code;
                        ie.ie_Qualifier = im-&#062;Qualifier;
                        /* recover dead key codes &#038; qualifiers */
                        ie.ie_EventAddress = (APTR *) *im-&#062;IAddress;
                        actual = MapRawKey(&#038;ie, buffer, BUFFERLEN, 0);
                        for (i = 0; i &#060; actual; i++)
                            ReportChar(buffer[i]);
                        break;
                    ...
                }
                ...
            }
        }

ERRORS
    if actual is -1, a buffer overflow condition was detected.
    Not all of the characters in the buffer are valid.

SEE ALSO
    <a href="../Includes_and_Autodocs_2._guide/node0051.html">devices/inputevent.h</a>, <a href="../Includes_and_Autodocs_2._guide/node003A.html">devices/keymap.h</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
