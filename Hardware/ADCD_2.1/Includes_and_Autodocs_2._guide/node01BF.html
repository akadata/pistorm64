<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="AutoDocs/iffparse" NODE="EntryHandler()" TITLE="iffparse.library/EntryHandler" -->
<head>
<title>iffparse.library/EntryHandler</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_2._guide/node01BE.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_2._guide/node01C0.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

NAME
    EntryHandler -- Add an entry handler to the <a href="../Includes_and_Autodocs_2._guide/node010B.html#line34">IFFHandle</a> context.

SYNOPSIS
    error = EntryHandler (iff, type, id, position, hook, object)
     d0                   a0    d0   d1    d2       a1     a2

    LONG             error;
    struct <a href="../Includes_and_Autodocs_2._guide/node010B.html#line34">IFFHandle</a> *iff;
    LONG             type, id, position;
    struct <a href="../Includes_and_Autodocs_2._guide/node012D.html#line23">Hook</a>     *hook;
    APTR             object;

FUNCTION
    Installs an entry handler vector for a specific type of chunk into
    the context for the given <a href="../Includes_and_Autodocs_2._guide/node010B.html#line34">IFFHandle</a> struct.  Type and id are the
    longword identifiers for the chunk to handle.  The hook is a client-
    supplied standard 2.0 <a href="../Includes_and_Autodocs_2._guide/node012D.html#line23">Hook</a> structure, properly initialized.  Position
    tells where to put the handler in the context.  The handler will be
    called whenever the parser enters a chunk of the given type, so the
    IFF stream will be positioned to read the first data byte in the
    chunk.  The handler will execute in the same context as whoever
    called <a href="../Includes_and_Autodocs_2._guide/node01D1.html">ParseIFF()</a>.  The handler will be called (through the hook)
    with the following arguments:

            A0:     the <a href="../Includes_and_Autodocs_2._guide/node012D.html#line23">Hook</a> pointer you passed.
            A2:     the 'object' pointer you passed.
            A1:     pointer to a LONG containing the value
                    IFFCMD_ENTRY.

    The error code your call-back routine returns will affect the parser
    in three different ways:

    Return value            Result
    ------------            ------
    0:                      Normal success;  <a href="../Includes_and_Autodocs_2._guide/node01D1.html">ParseIFF()</a> will continue
                            through the file.
    IFF_RETURN2CLIENT:      <a href="../Includes_and_Autodocs_2._guide/node01D1.html">ParseIFF()</a> will stop and return the value 0.
                            (StopChunk() is internally implemented using
                            this return value.)
    Any other value:        <a href="../Includes_and_Autodocs_2._guide/node01D1.html">ParseIFF()</a> will stop and return the value
                            you supplied.  This is how errors should be
                            returned.

INPUTS
    iff     - pointer to <a href="../Includes_and_Autodocs_2._guide/node010B.html#line34">IFFHandle</a> struct.
    type    - type code for chunk to handle (ex. &#034;ILBM&#034;).
    id      - ID code for chunk to handle (ex. &#034;CMAP&#034;).
    position- Local context item position.  One of the IFFSLI_#? codes.
    hook    - pointer to <a href="../Includes_and_Autodocs_2._guide/node012D.html#line23">Hook</a> structure.
    object  - a client-defined pointer which is passed in A2 during call-
              back.

RESULT
    error   - 0 if successful or an IFFERR_#? error code if not
              successful.

EXAMPLE

NOTES

BUGS
    Returning the values IFFERR_EOF or IFFERR_EOC from the call-back
    routine *may* confuse the parser.

    There is no way to explicitly remove a handler once installed.
    However, by installing a do-nothing handler using IFFSLI_TOP,
    previous handlers will be overridden until the context expires.

SEE ALSO
    <a href="../Includes_and_Autodocs_2._guide/node01C0.html">ExitHandler()</a>, <a href="../Includes_and_Autodocs_2._guide/node01DD.html">StoreLocalItem()</a>, <a href="../Includes_and_Autodocs_2._guide/node01DC.html">StoreItemInContext()</a>,
    <a href="../Includes_and_Autodocs_2._guide/node012D.html">utility/hooks.h</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
