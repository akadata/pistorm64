<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="AutoDocs/amiga_lib" NODE="ArgArrayInit()" TITLE="amiga.lib/ArgArrayInit" -->
<head>
<title>amiga.lib/ArgArrayInit</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_2._guide/node013C.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_2._guide/node013E.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

NAME
    ArgArrayInit -- allocate and initialize a tooltype array. (V36)

SYNOPSIS
    ttypes = ArgArrayInit(argc,argv);

    UBYTE **ArgArrayInit(LONG,UBYTE **);

FUNCTION
    This function returns a null-terminated array of strings
    suitable for sending to <a href="../Includes_and_Autodocs_2._guide/node0186.html">icon.library/FindToolType()</a>. This array will
    be the ToolTypes array of the program's icon, if it was started from
    Workbench. It will just be 'argv' if the program was started from
    a shell.

    Pass ArgArrayInit() your startup arguments received by main().

    ArgArrayInit() requires that icon.library be open (even if the caller
    was started from a shell, so that the function <a href="../Includes_and_Autodocs_2._guide/node0186.html">FindToolType()</a> can be
    used) and may call <a href="../Includes_and_Autodocs_2._guide/node018A.html">GetDiskObject()</a>, so clean up is necessary when
    the strings are no longer needed. The function <a href="../Includes_and_Autodocs_2._guide/node013C.html">ArgArrayDone()</a> does
    just that.

INPUTS
    argc - the number of arguments in argv, 0 when started from Workbench
    argv - an array of pointers to the program's arguments, or the
           Workbench startup message when started from WB.

RESULTS
    ttypes - the initialized argument array or NULL if it could not be
             allocated

EXAMPLE
    Use of these routines facilitates the use of ToolTypes or command-
    line arguments to control end-user parameters in Commodities
    applications. For example, a filter used to trap a keystroke for
    popping up a window might be created by something like this:

            char   *ttypes  = ArgArrayInit(argc, argv);
            CxObj   *filter = UserFilter(ttypes, &#034;POPWINDOW&#034;, &#034;alt f1&#034;);

           ... with ...

           CxObj *UserFilter(char **tt, char *action_name,
                              char *default_descr)
            {
            char *desc;

                desc = FindToolType(tt,action_name);

                return(CxFilter((ULONG)(desc? desc: default_descr)));
            }

    In this way the user can assign &#034;alt f2&#034; to the action by
    entering a tooltype in the program's icon of the form:

            POPWINDOW=alt f2

    or by starting the program from the CLI like so:

            myprogram &#034;POPWINDOW=alt f2&#034;

NOTE
    Your program must open icon.library and set up IconBase before calling
    this routine. In addition IconBase must remain valid until after
    <a href="../Includes_and_Autodocs_2._guide/node013C.html">ArgArrayDone()</a> has been called!

SEE ALSO
    <a href="../Includes_and_Autodocs_2._guide/node013C.html">ArgArrayDone()</a>, <a href="../Includes_and_Autodocs_2._guide/node013F.html">ArgString()</a>, <a href="../Includes_and_Autodocs_2._guide/node013E.html">ArgInt()</a>, <a href="../Includes_and_Autodocs_2._guide/node0186.html">icon.library/FindToolType()</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
