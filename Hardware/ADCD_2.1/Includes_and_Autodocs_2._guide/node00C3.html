<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Includes/graphics/gels.h" NODE="MAIN" TITLE="Includes/graphics/gels.h" -->
<head>
<title>Includes/graphics/gels.h</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_2._guide/node00C2.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_2._guide/node00C4.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
#ifndef	GRAPHICS_GELS_H
#define	GRAPHICS_GELS_H
/*
**	$Filename: graphics/gels.h $
**	$Release: 2.04 Includes, V37.4 $
**	$Revision: 37.0 $
**	$Date: 91/01/07 $
**
**	include file for AMIGA GELS (Graphics Elements)
**
**	(C) Copyright 1985-1999 Amiga, Inc.
**	    All Rights Reserved
*/
<a name="line14"></a>
#ifndef EXEC_TYPES_H
#include &#060;exec/types.h&#062;
#endif

<a name="line19">/* VSprite flags */</a>
<a name="line20">/* user-set VSprite flags: */</a>
<a name="line21">#define SUSERFLAGS  0x00FF    /* mask of all user-settable VSprite-flags */</a>
<a name="line22">#define VSPRITE     0x0001    /* set if VSprite, clear if Bob */</a>
<a name="line23">#define SAVEBACK    0x0002    /* set if background is to be saved/restored */</a>
<a name="line24">#define OVERLAY     0x0004    /* set to mask image of Bob onto background */</a>
<a name="line25">#define MUSTDRAW    0x0008    /* set if VSprite absolutely must be drawn */</a>
<a name="line26">/* system-set VSprite flags: */</a>
<a name="line27">#define BACKSAVED   0x0100    /* this Bob's background has been saved */</a>
<a name="line28">#define BOBUPDATE   0x0200    /* temporary flag, useless to outside world */</a>
<a name="line29">#define GELGONE     0x0400    /* set if gel is completely clipped (offscreen) */</a>
#define VSOVERFLOW  0x0800    /* VSprite overflow (if MUSTDRAW set we draw!) */

<a name="line32">/* Bob flags */</a>
<a name="line33">/* these are the user flag bits */</a>
<a name="line34">#define BUSERFLAGS  0x00FF    /* mask of all user-settable Bob-flags */</a>
<a name="line35">#define SAVEBOB     0x0001    /* set to not erase Bob */</a>
<a name="line36">#define BOBISCOMP   0x0002    /* set to identify Bob as AnimComp */</a>
<a name="line37">/* these are the system flag bits */</a>
<a name="line38">#define BWAITING    0x0100    /* set while Bob is waiting on 'after' */</a>
<a name="line39">#define BDRAWN	    0x0200    /* set when Bob is drawn this DrawG pass*/</a>
<a name="line40">#define BOBSAWAY    0x0400    /* set to initiate removal of Bob */</a>
<a name="line41">#define BOBNIX	    0x0800    /* set when Bob is completely removed */</a>
<a name="line42">#define SAVEPRESERVE 0x1000   /* for back-restore during double-buffer*/</a>
#define OUTSTEP     0x2000    /* for double-clearing if double-buffer */
<a name="line44"></a>
<a name="line45">/* defines for the animation procedures */</a>
<a name="line46">#define ANFRACSIZE  6</a>
<a name="line47">#define ANIMHALF    0x0020</a>
#define RINGTRIGGER 0x0001


/* UserStuff definitions
 *  the user can define these to be a single variable or a sub-structure
 *  if undefined by the user, the system turns these into innocuous variables
 *  see the manual for a thorough definition of the UserStuff definitions
<a name="line55"> *</a>
 */
#ifndef VUserStuff	      /* VSprite user stuff */
<a name="line58">#define VUserStuff WORD</a>
#endif

#ifndef BUserStuff	      /* Bob user stuff */
#define BUserStuff WORD
<a name="line63">#endif</a>

#ifndef AUserStuff	      /* AnimOb user stuff */
#define AUserStuff WORD
#endif

<a name="line69"></a>

<a name="line71"></a>
/*********************** GEL STRUCTURES ***********************************/
<a name="line73"></a>
<a name="line74">struct VSprite</a>
<a name="line75">{</a>
/* --------------------- SYSTEM VARIABLES ------------------------------- */
/* GEL linked list forward/backward pointers sorted by y,x value */
    struct VSprite   *NextVSprite;
    struct VSprite   *PrevVSprite;
<a name="line80"></a>
<a name="line81">/* GEL draw list constructed in the order the Bobs are actually drawn, then</a>
 *  list is copied to clear list
 *  must be here in VSprite for system boundary detection
 */
    struct VSprite   *DrawPath;     /* pointer of overlay drawing */
<a name="line86">    struct VSprite   *ClearPath;    /* pointer for overlay clearing */</a>
<a name="line87"></a>
/* the VSprite positions are defined in (y,x) order to make sorting
<a name="line89"> *  sorting easier, since (y,x) as a long integer</a>
 */
    WORD OldY, OldX;	      /* previous position */
<a name="line92"></a>
/* --------------------- COMMON VARIABLES --------------------------------- */
    WORD Flags;	      /* VSprite flags */
<a name="line95"></a>
<a name="line96"></a>
<a name="line97">/* --------------------- USER VARIABLES ----------------------------------- */</a>
<a name="line98">/* the VSprite positions are defined in (y,x) order to make sorting</a>
<a name="line99"> *  sorting easier, since (y,x) as a long integer</a>
 */
<a name="line101">    WORD Y, X;		      /* screen position */</a>
<a name="line102"></a>
    WORD Height;
<a name="line104">    WORD Width;	      /* number of words per row of image data */</a>
    WORD Depth;	      /* number of planes of data */
<a name="line106"></a>
    WORD MeMask;	      /* which types can collide with this VSprite*/
    WORD HitMask;	      /* which types this VSprite can collide with*/
<a name="line109"></a>
<a name="line110">    WORD *ImageData;	      /* pointer to VSprite image */</a>
<a name="line111"></a>
/* borderLine is the one-dimensional logical OR of all
<a name="line113"> *  the VSprite bits, used for fast collision detection of edge</a>
 */
<a name="line115">    WORD *BorderLine;	      /* logical OR of all VSprite bits */</a>
    WORD *CollMask;	      /* similar to above except this is a matrix */
<a name="line117"></a>
/* pointer to this VSprite's color definitions (not used by Bobs) */
    WORD *SprColors;
<a name="line120"></a>
    struct Bob *VSBob;	      /* points home if this VSprite is part of
				   a Bob */
<a name="line123"></a>
/* planePick flag:  set bit selects a plane from image, clear bit selects
 *  use of shadow mask for that plane
 * OnOff flag: if using shadow mask to fill plane, this bit (corresponding
 *  to bit in planePick) describes whether to fill with 0's or 1's
 * There are two uses for these flags:
<a name="line129"> *	- if this is the VSprite of a Bob, these flags describe how the Bob</a>
<a name="line130"> *	  is to be drawn into memory</a>
 *	- if this is a simple VSprite and the user intends on setting the
<a name="line132"> *	  MUSTDRAW flag of the VSprite, these flags must be set too to describe</a>
 *	  which color registers the user wants for the image
 */
    BYTE PlanePick;
    BYTE PlaneOnOff;

    VUserStuff VUserExt;      /* user definable:  see note above */
};
<a name="line140"></a>
<a name="line141">struct Bob</a>
/* blitter-objects */
{
<a name="line144">/* --------------------- SYSTEM VARIABLES --------------------------------- */</a>

/* --------------------- COMMON VARIABLES --------------------------------- */
<a name="line147">    WORD Flags;	/* general purpose flags (see definitions below) */</a>

/* --------------------- USER VARIABLES ----------------------------------- */
    WORD *SaveBuffer;	/* pointer to the buffer for background save */

<a name="line152">/* used by Bobs for &#034;cookie-cutting&#034; and multi-plane masking */</a>
<a name="line153">    WORD *ImageShadow;</a>

<a name="line155">/* pointer to BOBs for sequenced drawing of Bobs</a>
 *  for correct overlaying of multiple component animations
<a name="line157"> */</a>
    struct Bob *Before; /* draw this Bob before Bob pointed to by before */
<a name="line159">    struct Bob *After;	/* draw this Bob after Bob pointed to by after */</a>

<a name="line161">    struct VSprite   *BobVSprite;   /* this Bob's VSprite definition */</a>

    struct AnimComp  *BobComp;	    /* pointer to this Bob's AnimComp def */

    struct DBufPacket *DBuffer;     /* pointer to this Bob's dBuf packet */

    BUserStuff BUserExt;	    /* Bob user extension */
};
<a name="line169"></a>
struct AnimComp
{
/* --------------------- SYSTEM VARIABLES --------------------------------- */

/* --------------------- COMMON VARIABLES --------------------------------- */
<a name="line175">    WORD Flags;		    /* AnimComp flags for system &#038; user */</a>
<a name="line176"></a>
/* timer defines how long to keep this component active:
 *  if set non-zero, timer decrements to zero then switches to nextSeq
<a name="line179"> *  if set to zero, AnimComp never switches</a>
 */
    WORD Timer;
<a name="line182"></a>
<a name="line183">/* --------------------- USER VARIABLES ----------------------------------- */</a>
/* initial value for timer when the AnimComp is activated by the system */
    WORD TimeSet;
<a name="line186"></a>
<a name="line187">/* pointer to next and previous components of animation object */</a>
    struct AnimComp  *NextComp;
<a name="line189">    struct AnimComp  *PrevComp;</a>
<a name="line190"></a>
<a name="line191">/* pointer to component component definition of next image in sequence */</a>
<a name="line192">    struct AnimComp  *NextSeq;</a>
    struct AnimComp  *PrevSeq;
<a name="line194"></a>
    WORD (*AnimCRoutine)(); /* address of special animation procedure */
<a name="line196"></a>
    WORD YTrans;     /* initial y translation (if this is a component) */
    WORD XTrans;     /* initial x translation (if this is a component) */

    struct AnimOb    *HeadOb;

<a name="line202">    struct Bob	     *AnimBob;</a>
};
<a name="line204"></a>
<a name="line205">struct AnimOb</a>
{
<a name="line207">/* --------------------- SYSTEM VARIABLES --------------------------------- */</a>
    struct AnimOb    *NextOb, *PrevOb;

<a name="line210">/* number of calls to Animate this AnimOb has endured */</a>
    LONG Clock;

<a name="line213">    WORD AnOldY, AnOldX;	    /* old y,x coordinates */</a>
<a name="line214"></a>
/* --------------------- COMMON VARIABLES --------------------------------- */
<a name="line216">    WORD AnY, AnX;		    /* y,x coordinates of the AnimOb */</a>

<a name="line218">/* --------------------- USER VARIABLES ----------------------------------- */</a>
    WORD YVel, XVel;		    /* velocities of this object */
    WORD YAccel, XAccel;	    /* accelerations of this object */
<a name="line221"></a>
    WORD RingYTrans, RingXTrans;    /* ring translation values */

<a name="line224">    WORD (*AnimORoutine)();	    /* address of special animation</a>
				       procedure */

    struct AnimComp  *HeadComp;     /* pointer to first component */

    AUserStuff AUserExt;	    /* AnimOb user extension */
};
<a name="line231"></a>
<a name="line232">/* dBufPacket defines the values needed to be saved across buffer to buffer</a>
 *  when in double-buffer mode
<a name="line234"> */</a>
struct DBufPacket
<a name="line236">{</a>
    WORD BufY, BufX;		    /* save the other buffers screen coordinates */
    struct VSprite   *BufPath;	    /* carry the draw path over the gap */
<a name="line239"></a>
/* these pointers must be filled in by the user */
/* pointer to other buffer's background save buffer */
    WORD *BufBuffer;
};

<a name="line245"></a>
<a name="line246"></a>
/* ************************************************************************ */

/* these are GEL functions that are currently simple enough to exist as a
<a name="line250"> *  definition.  It should not be assumed that this will always be the case</a>
<a name="line251"> */</a>
<a name="line252">#define InitAnimate(animKey) {*(animKey) = NULL;}</a>
#define RemBob(b) {(b)-&#062;Flags |= BOBSAWAY;}


/* ************************************************************************ */
<a name="line257"></a>
#define B2NORM	    0
<a name="line259">#define B2SWAP	    1</a>
#define B2BOBBER    2

/* ************************************************************************ */
<a name="line263"></a>
<a name="line264">/* a structure to contain the 16 collision procedure addresses */</a>
struct collTable
{
    int (*collPtrs[16])();
};

#endif	/* GRAPHICS_GELS_H */
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
