<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="AutoDocs/dos" NODE="CliInitRun()" TITLE="dos.library/CliInitRun" -->
<head>
<title>dos.library/CliInitRun</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_2._guide/node0288.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_2._guide/node028A.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

NAME
    CliInitRun -- Set up a process to be a shell from initial packet

SYNOPSIS
    flags = CliInitRun( packet )
    D0                    A0

    LONG CliInitRun( struct <a href="../Includes_and_Autodocs_2._guide/node0078.html#line109">DosPacket</a> * )

FUNCTION
    This function initializes a process and CLI structure for a new
    shell, from parameters in an initial packet passed by the system
    (Run, System(), Execute()).  The format of the data in the packet
    is purposely not defined.  The setup includes all the normal fields
    in the structures that are required for proper operation (current
    directory, paths, input streams, etc).

    It returns a set of flags containing information about what type
    of shell invocation this is.

    Definitions for the values of fn:
            Bit 31     Set to indicate flags are valid
            Bit  3     Set to indicate asynch system call
            Bit  2     Set if this is a System() call
            Bit  1     Set if user provided input stream
            Bit  0     Set if RUN provided output stream

    If Bit 31 is 0, then you must check <a href="../Includes_and_Autodocs_2._guide/node02C2.html">IoErr()</a> to determine if an error
    occurred.  If <a href="../Includes_and_Autodocs_2._guide/node02C2.html">IoErr()</a> returns a pointer to your process, there has
    been an error, and you should clean up and exit.  The packet will
    have already been returned by <a href="../Includes_and_Autodocs_2._guide/node0288.html">CliInitNewcli()</a>.  If it isn't a pointer
    to your process and Bit 31 is 0, you should wait before replying
    the packet until after you've loaded the first command (or when you
    exit).  This helps avoid disk &#034;gronking&#034; with the Run command.
    (Note: this is different from what you do for CliInitNewcli().)

    If Bit 31 is 1, then if Bit 3 is one, <a href="../Includes_and_Autodocs_2._guide/node02E9.html">ReplyPkt()</a> the packet
    immediately (Asynch System()), otherwise wait until your shell exits
    (Sync System(), <a href="../Includes_and_Autodocs_2._guide/node029E.html">Execute()</a>).
    (Note: this is different from what you do for CliInitNewcli().)

    This function is very similar to <a href="../Includes_and_Autodocs_2._guide/node0288.html">CliInitNewcli()</a>.

INPUTS
    packet - the initial packet sent to your process <a href="../Includes_and_Autodocs_2._guide/node0099.html#line29">MsgPort</a>

RESULT
    fn - flags or a pointer

SEE ALSO
    <a href="../Includes_and_Autodocs_2._guide/node0288.html">CliInitNewcli()</a>, <a href="../Includes_and_Autodocs_2._guide/node02E9.html">ReplyPkt()</a>, <a href="../Includes_and_Autodocs_2._guide/node030F.html">WaitPkt()</a>, System(), <a href="../Includes_and_Autodocs_2._guide/node029E.html">Execute()</a>, <a href="../Includes_and_Autodocs_2._guide/node02C2.html">IoErr()</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
