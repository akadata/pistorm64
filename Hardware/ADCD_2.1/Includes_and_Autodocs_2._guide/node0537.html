<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="AutoDocs/cia" NODE="AddICRVector()" TITLE="cia.resource/AddICRVector" -->
<head>
<title>cia.resource/AddICRVector</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_2._guide/node0536.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_2._guide/node0538.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

NAME
    AddICRVector -- attach an interrupt handler to a <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> bit.

SYNOPSIS
    interrupt = AddICRVector( Resource, iCRBit, interrupt )
    D0                        A6        D0      A1

    struct <a href="../Includes_and_Autodocs_2._guide/node008C.html#line23">Interrupt</a> *AddICRVector( struct <a href="../Includes_and_Autodocs_2._guide/node009C.html#line34">Library</a> *, WORD,
            struct <a href="../Includes_and_Autodocs_2._guide/node008C.html#line23">Interrupt</a> * );

FUNCTION
    Assign interrupt processing code to a particular interrupt bit
    of the <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> ICR.  If the interrupt bit has already been
    assigned, this function will fail, and return a pointer to the
    owner interrupt.  If it succeeds, a null is returned.

    This function will also enable the <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> interrupt for the given
    ICR bit.

INPUTS
    iCRBit          Bit number to set (0..4).
    interrupt       Pointer to interrupt structure.

RESULT
    interrupt       Zero if successful, otherwise returns a
                        pointer to the current owner interrupt
                        structure.

NOTE
    A processor interrupt may be generated immediatly if this call
    is successful.

    In general, it is probably best to only call this function
    while DISABLED so that the resource to which the interrupt
    handler is being attached may be set to a known state before
    the handler is called. You MUST NOT change the state of the
    resource before attaching your handler to it.

    The <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> resources are special in that there is more than one
    of them in the system. Because of this, the C language stubs
    in amiga.lib for the <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> resources require an extra parameter
    to specify which <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> resource to use. The synopsys for the
    amiga.lib stubs is as follows:

    interrupt = AddICRVector( Resource, iCRBit, interrupt )
    D0                        A6        D0      A1

    struct <a href="../Includes_and_Autodocs_2._guide/node008C.html#line23">Interrupt</a> *AddICRVector( struct <a href="../Includes_and_Autodocs_2._guide/node009C.html#line34">Library</a> *, WORD,
            struct <a href="../Includes_and_Autodocs_2._guide/node008C.html#line23">Interrupt</a> *);

    ***WARNING***

    Never assume that any of the <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> hardware is free for use.
    Always use the AddICRVector() function to obtain ownership
    of the <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> hardware registers your code will use.

    Note that there are two (2) interval timers per <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a>.  If
    your application needs one of the interval timers, you
    can try to obtain any one of the four (4) until AddICRVector()
    succeeds.  If all four interval timers are in-use, your
    application should exit cleanly.

    If you just want ownership of a <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> hardware timer, or register,
    but do not want interrupts generated, use the AddICRVector()
    function to obtain ownership, and use the <a href="../Includes_and_Autodocs_2._guide/node0536.html">AbleICR()</a> function
    to turn off (or on) interrupts as needed.

    Note that CIA-B generates level 6 interrupts (which can degrade
    system performance by blocking lower priority interrupts).  As
    usual, interrupt handling code should be optimized for speed.

    Always call <a href="../Includes_and_Autodocs_2._guide/node0538.html">RemICRVector()</a> when your code exits to release
    ownership of any <a href="../Includes_and_Autodocs_2._guide/node00C7.html#line30">CIA</a> hardware obtained with AddICRVector().

SEE ALSO
    <a href="../Includes_and_Autodocs_2._guide/node0538.html">cia.resource/RemICRVector()</a>, <a href="../Includes_and_Autodocs_2._guide/node0536.html">cia.resource/AbleICR()</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
