SOURCE: Devices_Manual_guide/node01A1.html
TITLE: Devices/Dev_examples/Read_BattClock.c

Devices/Dev_examples/Read_BattClock.c ]" border=0> /* * Read_BattClock.c * * Example of reading the BattClock and converting its output to * a useful measure of time by calling the Amiga2Date() utility function. * * Compile with SAS C 5.10 lc -b1 -cfistq -v -y -L * * Run from CLI only */ #include #include #include #include #include #include #include #include #include #ifdef LATTICE int CXBRK(void) { return(0); } /* Disable SAS CTRL/C handling */ int chkabort(void) { return(0); } /* really */ #endif VOID main(VOID); struct Library *UtilityBase = NULL; struct Library *BattClockBase; VOID main(VOID) { UBYTE *Days[] ={"Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"}; UBYTE *Months[] = {"January","February","March","April","May","June", "July","August","September","October","November","December"}; UBYTE *ampm; ULONG AmigaTime; struct ClockData MyClock; if (UtilityBase = (struct Library *)OpenLibrary("utility.library",33)) { if (BattClockBase= OpenResource(BATTCLOCKNAME)) { /* Get number of seconds till now */ AmigaTime = ReadBattClock(); /* Convert to a ClockData structure */ Amiga2Date(AmigaTime,&MyClock); printf("\nRobin, tell everyone the BatDate and BatTime"); /* Print the Date */ printf("\n\nOkay Batman, the BatDate is "); printf("%s, %s %d, %d",Days[MyClock.wday],Months[MyClock.month-1], MyClock.mday,MyClock.year); /* Convert military time to normal time and set AM/PM */ if (MyClock.hour [Back to Amiga Developer Docs ]
