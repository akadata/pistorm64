SOURCE: Includes_and_Autodocs_2._guide/node0045.html
TITLE: Includes/devices/hardblocks.i

Includes/devices/hardblocks.i ]" border=0> IFND DEVICES_HARDBLOCKS_I DEVICES_HARDBLOCKS_I SET 1 ** ** $Filename: devices/hardblocks.i $ ** $Release: 2.04 Includes, V37.4 $ ** $Revision: 36.3 $ ** $Date: 91/08/23 $ ** ** File System identifier blocks for hard disks ** ** (C) Copyright 1988-1999 Amiga, Inc. ** All Rights Reserved ** IFND EXEC_TYPES_I INCLUDE "exec/types.i" ENDC ;--------------------------------------------------------------------- ; ; This file describes blocks of data that exist on a hard disk ; to describe that disk. They are not generically accessable to ; the user as they do not appear on any DOS drive. The blocks ; are tagged with a unique identifier, checksummed, and linked ; together. The root of these blocks is the RigidDiskBlock. ; ; The RigidDiskBlock must exist on the disk within the first ; RDB_LOCATION_LIMIT blocks. This inhibits the use of the zero ; cylinder in an AmigaDOS partition: although it is strictly ; possible to store the RigidDiskBlock data in the reserved ; area of a partition, this practice is discouraged since the ; reserved blocks of a partition are overwritten by "Format", ; "Install", "DiskCopy", etc. The recommended disk layout, ; then, is to use the first cylinder(s) to store all the drive ; data specified by these blocks: i.e. partition descriptions, ; file system load images, drive bad block maps, spare blocks, ; etc. ; ; Though only 512 byte blocks are currently supported by the ; file system, this proposal tries to be forward-looking by ; making the block size explicit, and by using only the first ; 256 bytes for all blocks but the LoadSeg data. ; ;--------------------------------------------------------------------- ; ; NOTE ; optional block addresses below contain $ffffffff to indicate ; a NULL address ; STRUCTURE RigidDiskBlock,0 ULONG rdb_ID ; 4 character identifier ULONG rdb_SummedLongs ; size of this checksummed structure LONG rdb_ChkSum ; block checksum (longword sum to zero) ULONG rdb_HostID ; SCSI Target ID of host ULONG rdb_BlockBytes ; size of disk blocks ULONG rdb_Flags ; see below for defines ; block list heads ULONG rdb_BadBlockList ; optional bad block list ULONG rdb_PartitionList ; optional first partition block ULONG rdb_FileSysHeaderList ; optional fule system header block ULONG rdb_DriveInit ; optional drive-specific init code ; DriveInit(lun,rdb,ior): "C" stk & d0/a0/a1 STRUCT rdb_Reserved1,6*4 ; set to $ffffffff ; physical drive characteristics ULONG rdb_Cylinders ; number of drive cylinders ULONG rdb_Sectors ; sectors per track ULONG rdb_Heads ; number of drive heads ULONG rdb_Interleave ; interleave ULONG rdb_Park ; landing zone cylinder STRUCT rdb_Reserved2,3*4 ULONG rdb_WritePreComp ; starting cylinder: write precompensation ULONG rdb_ReducedWrite ; starting cylinder: reduced write current ULONG rdb_StepRate ; drive step rate STRUCT rdb_Reserved3,5*4 ; logical drive characteristics ULONG rdb_RDBBlocksLo ; low block of range reserved for hardblocks ULONG rdb_RDBBlocksHi ; high block of range for these hardblocks ULONG rdb_LoCylinder ; low cylinder of partitionable disk area ULONG rdb_HiCylinder ; high cylinder of partitionable data area ULONG rdb_CylBlocks ; number of blocks available per cylinder ULONG rdb_AutoParkSeconds ; zero for no auto park ULONG rdb_HighRDSKBlock ; highest block used by RDSK ; (not including replacement bad blocks) STRUCT rdb_Reserved4,1*4 ; drive identification STRUCT rdb_DiskVendor,8 STRUCT rdb_DiskProduct,16 STRUCT rdb_DiskRevision,4 STRUCT rdb_ControllerVendor,8 STRUCT rdb_ControllerProduct,16 STRUCT rdb_ControllerRevision,4 STRUCT rdb_Reserved5,10*4 LABEL RigidDiskBlock_SIZEOF IDNAME_RIGIDDISK EQU (('R' [Back to Amiga Developer Docs ]
