include/libraries/realtime.h ]" border=0> #ifndef LIBRARIES_REALTIME_H #define LIBRARIES_REALTIME_H /* ** $VER: realtime.h 40.3 (5.4.1993) ** Includes Release 44.1 ** ** realtime.library timing and syncing system ** ** (C) Copyright 1993-1999 Amiga, Inc. ** All Rights Reserved */ /*****************************************************************************/ #ifndef EXEC_TYPES_H #include #endif #ifndef EXEC_LISTS_H #include #endif #ifndef EXEC_LIBRARIES_H #include #endif #ifndef UTILITY_TAGITEM_H #include #endif #ifndef UTILITY_HOOKS_H #include #endif /*****************************************************************************/ /* realtime.library's idea of time is based on a clock which emits a pulse * 1200 times a second (1.2kHz). All time values maintained by realtime.library * are based on this number. For example, the field RealTimeBase->rtb_Time * expresses an amount of time equivalent to (RealTimeBase->rtb_Time/TICK_FREQ) * seconds. */ #define TICK_FREQ 1200 /*****************************************************************************/ /* Each Conductor represents a group of applications which wish to remain * synchronized together. * * This structure must only be allocated by realtime.library and is * READ-ONLY! */ struct Conductor { struct Node cdt_Link; UWORD cdt_Reserved0; struct MinList cdt_Players; /* this conductor's players */ ULONG cdt_ClockTime; /* current time of this sequence */ ULONG cdt_StartTime; /* start time of this sequence */ ULONG cdt_ExternalTime; /* time from external unit */ ULONG cdt_MaxExternalTime; /* upper limit on sync'd time */ ULONG cdt_Metronome; /* MetricTime highest pri node */ UWORD cdt_Reserved1; UWORD cdt_Flags; /* conductor flags */ UBYTE cdt_State; /* playing or stopped */ }; /* Flag bits for Conductor.cdt_Flags */ #define CONDUCTF_EXTERNAL (1 */ struct Player { struct Node pl_Link; BYTE pl_Reserved0; BYTE pl_Reserved1; struct Hook *pl_Hook; /* player's hook function */ struct Conductor *pl_Source; /* pointer to parent context */ struct Task *pl_Task; /* task to signal for alarm */ LONG pl_MetricTime; /* current time in app's metric */ LONG pl_AlarmTime; /* time to wake up */ void *pl_UserData; /* for application use */ UWORD pl_PlayerID; /* for application use */ UWORD pl_Flags; /* general Player flags */ }; /* Flag bits for Player.pl_Flags */ #define PLAYERF_READY (1 /* used for PM_TICK, PM_POSITION and PM_SHUTTLE methods */ struct pmTime { ULONG pmt_Method; /* PM_TICK, PM_POSITION, or PM_SHUTTLE */ ULONG pmt_Time; }; /* used for the PM_STATE method */ struct pmState { ULONG pms_Method; /* PM_STATE */ ULONG pms_OldState; }; /*****************************************************************************/ /* Possible lock types for LockRealTime() */ #define RT_CONDUCTORS 0 /* conductor list */ /*****************************************************************************/ /* realtime.library error codes */ #define RTE_NOMEMORY 801 /* memory allocation failed */ #define RTE_NOCONDUCTOR 802 /* player needs a conductor */ #define RTE_NOTIMER 803 /* timer (CIA) allocation failed */ #define RTE_PLAYING 804 /* can't shuttle while playing */ /*****************************************************************************/ /* OpenLibrary("realtime.library",0) returns a pointer to this structure. * All fields are READ-ONLY. */ struct RealTimeBase { struct Library rtb_LibNode; UBYTE rtb_Reserved0[2]; ULONG rtb_Time; /* current time */ ULONG rtb_TimeFrac; /* fixed-point fraction part of time */ UWORD rtb_Reserved1; WORD rtb_TickErr; /* nanosecond error from ideal Tick */ }; /* length to real tick length */ /* Actual tick length is: 1/TICK_FREQ + rtb_TickErr/1e9 */ #define RealTime_TickErr_Min -705 #define RealTime_TickErr_Max 705 /*****************************************************************************/ #endif /* LIBRARIES_REALTIME_H */ [Back to Amiga Developer Docs ]