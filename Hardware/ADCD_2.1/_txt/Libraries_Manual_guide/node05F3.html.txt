lib_examples/ssprite.c ]" border=0> /* The following example demonstrates how to set up, move and free a ** Simple Sprite. The animtools.h file included is listed at the end of ** the chapter. ** ** ssprite.c - Simple Sprite example ** ** SAS/C V5.10a ** lc -b1 -cfist -v -y ssprite.c ** blink FROM LIB:c.o ssprite.o LIB LIB:lc.lib LIB:amiga.lib TO ssprite */ #include #include #include #include #include #include #include #include #include #include #include #include #include #include #include struct GfxBase *GfxBase = NULL; struct IntuitionBase *IntuitionBase = NULL; extern struct Custom far custom ; /* real boring sprite data */ UWORD chip sprite_data[ ] = { 0, 0, /* position control */ 0xffff, 0x0000, /* image data line 1, color 1 */ 0xffff, 0x0000, /* image data line 2, color 1 */ 0x0000, 0xffff, /* image data line 3, color 2 */ 0x0000, 0xffff, /* image data line 4, color 2 */ 0x0000, 0x0000, /* image data line 5, transparent */ 0x0000, 0xffff, /* image data line 6, color 2 */ 0x0000, 0xffff, /* image data line 7, color 2 */ 0xffff, 0xffff, /* image data line 8, color 3 */ 0xffff, 0xffff, /* image data line 9, color 3 */ 0, 0 /* reserved, must init to 0 0 */ }; VOID main(int argc, char **argv) { struct SimpleSprite sprite = {0}; struct ViewPort *viewport; WORD sprite_num; SHORT delta_move, ktr1, ktr2, color_reg; struct Screen *screen; int return_code; return_code = RETURN_OK; if (NULL == (GfxBase = (struct GfxBase *) OpenLibrary("graphics.library",37L))) return_code = RETURN_FAIL; else { if (NULL == (IntuitionBase = (struct IntuitionBase *)OpenLibrary("intuition.library",37L))) return_code = RETURN_FAIL; else { /* opened library, need a viewport to render a sprite over. */ if (NULL == (screen = OpenScreenTagList(NULL, NULL))) return_code = RETURN_FAIL; else { viewport = &screen->ViewPort; if (-1 == (sprite_num = GetSprite(&sprite, 2))) return_code = RETURN_WARN; else { /* Calculate the correct base color register number, */ /* set up the color registers. */ color_reg = 16 + ((sprite_num & 0x06) [Back to Amiga Developer Docs ]