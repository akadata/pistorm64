<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/39.2 FILE="graphics" NODE="WaitBlit()" TITLE="graphics.library/WaitBlit" -->
<head>
<title>graphics.library/WaitBlit</title>
</head>
<body text="#000000" bgcolor="#AAAAAA">
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_3._guide/node0338.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_3._guide/node033A.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

<b>   NAME</b>
       WaitBlit -- <a href="../Includes_and_Autodocs_3._guide/node0246.html">Wait</a> for the blitter to be finished before proceeding
                   with anything else.

<b>   SYNOPSIS</b>
       WaitBlit()

	void WaitBlit( void );

<b>   FUNCTION</b>
	WaitBlit returns when the blitter is idle. This function should
	normally only be used when dealing with the blitter in a
	synchronous manner, such as when using <a href="../Includes_and_Autodocs_3._guide/node030C.html">OwnBlitter</a> and <a href="../Includes_and_Autodocs_3._guide/node02CA.html">DisownBlitter</a>.
	WaitBlit does not wait for all blits queued up using <a href="../Includes_and_Autodocs_3._guide/node030E.html">QBlit</a> or
	<a href="../Includes_and_Autodocs_3._guide/node030F.html">QBSBlit</a>. You should call WaitBlit if you are just about to modify or
	free some memory that the blitter may be using.

<b>   INPUTS</b>
       none

<b>   RESULT</b>
       Your program waits until the blitter is finished.
	This routine does not use any the CPU registers.
	do/d1/a0/a1 are preserved by this routine.
	It may change the condition codes though.

<b>   BUGS</b>
	When examining bits with the CPU right after a blit, or when freeing
	temporary memory used by the blitter, a WaitBlit() may be required.

	Note that many graphics calls fire up the blitter, and let it run.
	The CPU does not need to wait for the blitter to finish before
	returning.

	Because of a bug in Agnus (prior to all revisions of fat Agnus)
 	this code may return too soon when the blitter has, in fact, not
	started the blit yet, even though BltSize has been written.

	This most often occurs in a heavily loaded system with extended memory,
	HIRES, and 4 bitplanes.

	WaitBlit currently tries to avoid this Agnus problem by testing
	the BUSY bit multiple times to make sure the blitter has started.
	If the blitter is BUSY at first check, this function busy waits.

	This initial hardware bug was fixed as of the first &#034;Fat Agnus&#034; chip,
	as used in all A500 and A2000 computers.

	Because of a different bug in Agnus (currently all revisions thru ECS)
 	this code may return too soon when the blitter has, in fact, not
	stopped the blit yet, even though blitter busy has been cleared.

	This most often occurs in a heavily loaded system with extended memory,
	in PRODUCTIVITY mode, and 2 bitplanes.

	WaitBlit currently tries to avoid this Agnus problem by testing
	the BUSY bit multiple times to make sure the blitter has really
	written its final word of destination data.

<b>   SEE ALSO</b>
	<a href="../Includes_and_Autodocs_3._guide/node030C.html">OwnBlitter()</a> <a href="../Includes_and_Autodocs_3._guide/node02CA.html">DisownBlitter()</a> <a href="../Includes_and_Autodocs_3._guide/node05DF.html">hardware/blit.h</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
