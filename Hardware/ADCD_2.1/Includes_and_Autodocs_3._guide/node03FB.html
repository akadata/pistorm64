<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/39.2 FILE="intuition" NODE="SysReqHandler()" TITLE="intuition.library/SysReqHandler" -->
<head>
<title>intuition.library/SysReqHandler</title>
</head>
<body text="#000000" bgcolor="#AAAAAA">
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_3._guide/node03FA.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_3._guide/node03FC.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

<b>    NAME</b>
	SysReqHandler -- Handle system requester input. (V36)

<b>    SYNOPSIS</b>
	num = SysReqHandler( <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a>, IDCMPFlagsPtr, WaitInput )
	D0                   A0      A1             D0

	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line39">LONG</a> SysReqHandler( struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a> *, ULONG *, <a href="../Includes_and_Autodocs_3._guide/node0654.html#line73">BOOL</a> );

<b>    FUNCTION</b>
	Handles input for a window returned by either <a href="../Includes_and_Autodocs_3._guide/node0399.html">BuildSysRequest()</a>
	or BuildEasyRequest().  These functions with SysReqHandler()
	you can perform an &#034;asynchronous&#034; EasyRequest() or <a href="../Includes_and_Autodocs_3._guide/node0396.html">AutoRequest()</a>.
	That is to say, you can perform other processing while you
	wait for the requester to be satisfied.

	Each time this function is called, it will process all
	IDCMPMessages that the window has received.  If the parameter
	'WaitInput' is non-zero, SysReqHandler() will wait for input
	(by calling <a href="../Includes_and_Autodocs_3._guide/node0248.html">WaitPort()</a>) if there are no IDCMP messages.

	SysReqHandler() returns the same values as EasyRequest(): A gadget
	ID greater than equal to 0, and  -1 if one of the other IDCMP
	events were received.

	An additional value of -2 is returned if the input processed
	does not satisfy the requester.  In this case, you might
	perform some processing and call SysReqHandler() again.

	Note: this function does NOT terminate the system request.
	Not only must you call <a href="../Includes_and_Autodocs_3._guide/node03B3.html">FreeSysRequest()</a> to eliminate the request,
	but you may also continue processing after an event which would
	normally terminate a normal call to EasyRequest().

<b>    EXAMPLE</b>
	Implementation of EasyRequest() input loop:

	window = BuildEasyRequest( ... )
	while ( (retval = SysReqHandler( window, idcmp_ptr, TRUE )) == -2 )
	{
	    /* loop	*/;
	}
	FreeSysRequest( window );

<b>    EXAMPLE</b>
	<a href="../Includes_and_Autodocs_3._guide/node03E5.html">Request</a> a volume, but don't remove the requester when the
	user inserts the wrong disk:

	struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line1456">EasyStruct</a> volumeES = {
	    sizeof (struct EasyStruct),
	    0,
	    &#034;Volume Request&#034;,
	    &#034;Please insert volume %s in any drive.&#034;,
	    &#034;Cancel&#034;
	};

	Volume *
	getVolume( volname )
	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line50">UBYTE</a>	*volname;
	{
	    struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a>	*window;
	    Volume		*volume = NULL;
	    Volume		*findVolume();
	    int			retval;

	    window = BuildEasyRequest( NULL, &#038;volumeES, IDCMP_DISKINSERTED,
	    	      volname );

	    while ( (retval = SysReqHandler( window, NULL, TRUE )) != 0 )
	    {
	    	/* not cancelled yet	*/

	    	/* when IDCMP_DISKINSERTED, check for volume */
	    	if (( retval == -1 ) &#038;&#038; (volume = findVolume( volname )))
		    break;
	    }
	    FreeSysRequest( window );
	    return ( volume );
	}

<b>    INPUTS</b>
	<a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a> = <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a> pointer returned from <a href="../Includes_and_Autodocs_3._guide/node0399.html">BuildSysRequest()</a> or
		BuildEasyRequest().  Those functions can also return
		values '0' or '1', and these values may also be
		passed to SysReqHandler(), which will immediately
		return the same value.

	IDCMPFlagsPtr = If you passed application specific IDCMP
		flags to <a href="../Includes_and_Autodocs_3._guide/node0399.html">BuildSysRequest()</a> or BuildEasyRequest(),
		SysReqHandler() will return -1 if that IDCMP message
		is received.  If IDCMPFlagsPtr is non-null, it
		points to a ULONG where the IDCMP class received
		will be copied for your examination.

		This pointer can be NULL if you have provided no
		application specific IDCMP flags or if you do
		not need to know which application specific IDCMP
		event occurred.

		If you provide more than on flag in the flags variable
		this pointer points to, you will have to refresh
		the variable whenever -1 is returned, since the
		variable will have been changed to show just the
		single IDCMP Class bit that caused the return.

	WaitInput = Specifies that you want SysReqHandler() to
	        to wait for IDCMP input if there is none pending.

<b>    RESULT</b>
	0, 1, ..., N = Successive GadgetID values, for the gadgets
	    you specify for the requester.  NOTE: The numbering
	    from left to right is actually: 1, 2, ..., N, 0.
	    This is for compatibility with AutoRequests which has
	    FALSE for the rightmost gadget.

	-1 = Means that one of the caller-supplied IDCMPFlags occurred.
	    The IDCMPFlag value is in the longword pointed to by UDCMP_ptr.

	-2 = input processed did not satisfy the requester. One example
	    is a keystroke that does not satisfy the requester.  Another
	    example is if there is no input pending and you specified
	    FALSE for WaitInput.

<b>    BUGS</b>

<b>    SEE ALSO</b>
	<a href="../Includes_and_Autodocs_3._guide/node0248.html">exec.library/WaitPort()</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
