<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/39.2 FILE="lowlevel" NODE="AddKBInt()" TITLE="lowlevel.library/AddKBInt" -->
<head>
<title>lowlevel.library/AddKBInt</title>
</head>
<body text="#000000" bgcolor="#AAAAAA">
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_3._guide/node0460.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_3._guide/node0462.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

<b>   NAME</b>
	AddKBInt -- adds a routine to the keyboard interrupt. (V40)

<b>   SYNOPSIS</b>
	intHandle = AddKBInt(intRoutine, intData);
	D0                   A0          A1

	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line37">APTR</a> AddKBInt(APTR, APTR);

<b>   FUNCTION</b>
	This routine extends the functionality of the keyboard interrupt to
	include intRoutine. Since this is an extention of the normal
	keyboard interrupt all of the keyboard handshaking is handled. The
	keyboard error codes are filtered out and not passed to intRoutine.

	The routine is called whenever the user enters a key on the
	keyboard.

	The routine is called from within an interrupt, so normal
	restrictions apply. The routine must preserve the following
	registers: A2, A3, A4, A7, D2-D7. Other registers are
	scratch, except for D0, which MUST BE SET TO 0 upon
	exit. On entry to the routine, A1 holds 'intData' and A5
	holds 'intRoutine', and D0 contains the rawkey code read
	from the keyboard.

	The routine is not called when a reset is received from the
	keyboard.

	This is a low level function that does not fit the normal Amiga
	multitasking model. The interrupt installed will have no knowledge
	of which window/screen currently has input focus.

	If your program is to exit without reboot, you MUST call <a href="../Includes_and_Autodocs_3._guide/node0469.html">RemKBInt()</a>
	before exiting.

	Only one interrupt routine may be added to the system.  ALWAYS
	check the return value in case some other task has previously
	used this function.

<b>   INPUTS</b>
	intRoutine - the routine to invoke every vblank. This routine should
		     be as short as possible to minimize its effect on overall
		     system performance.
	intData - data passed to the routine in register A1. If more than one
		  long word of data is required this should be a pointer to
		  a structure that contains the required data.

<b>   RESULT</b>
	intHandle - a handle used to manipulate the interrupt, or NULL
		    if it was not possible to attach the routine.

<b>   SEE ALSO</b>
	<a href="../Includes_and_Autodocs_3._guide/node0469.html">RemKBInt()</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
