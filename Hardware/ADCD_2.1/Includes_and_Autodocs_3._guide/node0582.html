<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/39.2 FILE="trackdisk" NODE="TD_ADDCHANGEINT" TITLE="trackdisk.device/TD_ADDCHANGEINT" -->
<head>
<title>trackdisk.device/TD_ADDCHANGEINT</title>
</head>
<body text="#000000" bgcolor="#AAAAAA">
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_3._guide/node0581.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_3._guide/node0583.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

<b>   NAME</b>
	TD_ADDCHANGEINT -- add a disk change software interrupt handler.

<b>   FUNCTION</b>
	This command lets you add a software interrupt handler to the
	disk device that gets invoked whenever a disk insertion or removal
	occurs.

	You must pass in a properly initialized Exec <a href="../Includes_and_Autodocs_3._guide/node061D.html#line21">Interrupt</a> structure
	and be prepared to deal with disk insertions/removals
	immediately. From within the interrupt handler, you may only call the
	status commands that can use IOF_QUICK.

	To set up the handler, an <a href="../Includes_and_Autodocs_3._guide/node061D.html#line21">Interrupt</a> structure must be initialized.
	This structure is supplied as the io_Data to the TD_ADDCHANGEINT
	command. The handler then gets linked into the handler chain and
	gets invoked whenever a disk change happens. You must eventually
	remove the handler before you exit.

	This command only returns when the handler is removed. That is,
	the device holds onto the IO request until the <a href="../Includes_and_Autodocs_3._guide/node058E.html">TD_REMCHANGEINT</a> command
	is executed with that same IO request. Hence, you must use <a href="../Includes_and_Autodocs_3._guide/node0236.html">SendIO()</a>
	with this command.

<b>   IO REQUEST INPUT</b>
	io_Device	preset by the call to <a href="../Includes_and_Autodocs_3._guide/node0560.html">OpenDevice()</a>
	io_Unit		preset by the call to <a href="../Includes_and_Autodocs_3._guide/node0560.html">OpenDevice()</a>
	io_Command	TD_ADDCHANGEINT
	io_Flags	0
	io_Length	sizeof(struct Interrupt)
	io_Data		pointer to <a href="../Includes_and_Autodocs_3._guide/node061D.html#line21">Interrupt</a> structure

<b>   IO REQUEST RESULT</b>
	io_Error - 0 for success, or an error code as defined in
	           <a href="../Includes_and_Autodocs_3._guide/node0604.html">&#060;devices/trackdisk.h&#062;</a>

<b>   SEE ALSO</b>
	<a href="../Includes_and_Autodocs_3._guide/node058E.html">TD_REMCHANGEINT</a>, <a href="../Includes_and_Autodocs_3._guide/node0604.html">&#060;devices/trackdisk.h&#062;</a>, <a href="../Includes_and_Autodocs_3._guide/node061D.html">&#060;exec/interrupts.h&#062;</a>,
	<a href="../Includes_and_Autodocs_3._guide/node01F4.html">exec.library/Cause()</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
