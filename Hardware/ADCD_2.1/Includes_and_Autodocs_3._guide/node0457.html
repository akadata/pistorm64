<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/39.2 FILE="locale" NODE="FormatString()" TITLE="locale.library/FormatString" -->
<head>
<title>locale.library/FormatString</title>
</head>
<body text="#000000" bgcolor="#AAAAAA">
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_3._guide/node0456.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_3._guide/node0458.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

<b>   NAME</b>
	FormatString -- format data into a character stream. (V38)

<b>   SYNOPSIS</b>
	next = FormatString(locale,fmtTemplate,dataStream,putCharFunc);
	D0                  A0     A1          A2         A3

	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line37">APTR</a> FormatString(struct <a href="../Includes_and_Autodocs_3._guide/node05E3.html#line117">Locale</a> *,<a href="../Includes_and_Autodocs_3._guide/node0654.html#line57">STRPTR</a>,<a href="../Includes_and_Autodocs_3._guide/node0654.html#line37">APTR</a>,struct <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> *);

<b>   FUNCTION</b>
	This function performs C-language-like formatting of a data stream,
	outputting the result a character at a time. Where % formatting
	commands are found in the formatting template, they are replaced with
	the corresponding elements in 'dataStream'. %% must be used in the
	string if a % is desired in the output.

	An extension to the standard C-language <a href="../Includes_and_Autodocs_3._guide/node0048.html">printf()</a> conventions used
	by FormatString() is argument position specification. Specifying the
	argument position lets the order of the % commands change while the
	arguments provided remain the same. Using the C <a href="../Includes_and_Autodocs_3._guide/node0048.html">printf()</a> call as an
	example:
	    printf(&#034;%d eyes, %d feet and %d ears&#034;,eyes,feet,ears);
	    printf(&#034;%3$d ears, %1$d eyes and %2$d feet&#034;,eyes,feet,ears);
	These two statements would produce the following output:
	    &#034;2 eyes, 3 feet and 4 ears&#034; for the first
	    &#034;4 ears, 2 eyes and 3 feet&#034; for the second

	The argument positioning feature lets you change the format string
	being processed while keeping the data stream the same. This is
	an invaluable tool when translating strings to different languages.

<b>   INPUTS</b>
	locale - the locale to use for the formatting
	fmtTemplate - a C-language-like NULL-terminated format string,
		      with the following supported % options:

	  %[arg_pos$][flags][width][.limit][length]type

	  arg_pos - ordinal position of the argument for this command within
		    the array of arguments pointed to by 'dataStream'
	    $     - must follow the arg_pos value, if specified
	  flags   - only one allowed. '-' specifies left justification.
	  width   - field width. If the first character is a '0', the
	            field is padded with leading 0s.
	    .     - must precede the field limit value, if specified
	  limit   - maximum number of characters to output from a string.
	            (only valid for %s or %b).
	  length  - size of input data defaults to word (16-bit) for types c,
		    d, u and x, 'l' changes this to long (32-bit).
	  type    - supported types are:
	                  b - BSTR, data is 32-bit <a href="../Includes_and_Autodocs_3._guide/node05F8.html#line129">BPTR</a> to byte count followed
	                      by a byte string. A NULL <a href="../Includes_and_Autodocs_3._guide/node05F8.html#line129">BPTR</a> is treated as an
			      empty string.
	                  d - signed decimal
			  D - signed decimal using the locale's formatting
			      conventions
			  u - unsigned decimal
			  U - unsigned decimal using the locale's formatting
			      conventions
	                  x - hexadecimal with hex digits in uppercase
			  X - hexadecimal with hex digits in lowercase
	                  s - string, a 32-bit pointer to a NULL-terminated
	                      byte string. A NULL pointer is treated
	                      as an empty string.
	                  c - character

	              If the formatting template parameter is NULL, the
		      function returns without outputting anything. Note the
		      meaning of %x and %X are swapped with respect to
		      standard C conventions. This is for compatibility with
		      <a href="../Includes_and_Autodocs_3._guide/node0227.html">exec.library/RawDoFmt()</a>.

	dataStream - a stream of data that is interpreted according to
		     the format string. Often this is a pointer into
		     the task's stack.
	putCharFunc - a callback hook invoked for every character generated,
		      including for the terminating NULL character. The hook
		      is called with:

		 	A0 - address of <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> structure
			A1 - character for hook to process (not a pointer!)
	                A2 - locale pointer

		     the function is called with a NULL char at the end of
		     the format string.

<b>   RESULT</b>
	next - A pointer to beyond the last data element used in 'dataStream'
	       (the next argument that would have been processed).
	       This allows multiple formatting passes to be made using the
	       same data.

<b>   WARNING</b>
	This function formats word values in the data stream. If your compiler
	defaults to longs, you must add an &#034;l&#034; to your specifications. This
	can get strange for characters, which might look like &#034;%lc&#034;.

<b>   SEE ALSO</b>
	<a href="../Includes_and_Autodocs_3._guide/node0227.html">exec.library/RawDoFmt()</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
