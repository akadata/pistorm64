<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/39.2 FILE="wb" NODE="AddAppWindowDropZoneA()" TITLE="workbench.library/AddAppWindowDropZoneAorkbench.library/AddAppWindowDropZoneA" -->
<head>
<title>workbench.library/AddAppWindowDropZoneAorkbench.library/AddAppWindowDropZoneA</title>
</head>
<body text="#000000" bgcolor="#AAAAAA">
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_3._guide/node05BC.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_3._guide/node05BE.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

<b>   NAME</b>
	AddAppWindowDropZoneA -- Designate an <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> area as suitable for
	    dropping icons on. (V44)

<b>   SYNOPSIS</b>
	dropZone = AddAppWindowDropZoneA(appWindow,id,userData,tags)
	   D0                               A0    D0    D1     A1

	struct AppWindowDropZone * AddAppWindowDropZoneA(struct <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> *aw,
	                           ULONG id,ULONG userData,
	                           struct <a href="../Includes_and_Autodocs_3._guide/node064C.html#line31">TagItem</a> * tags);

	dropZone = AddAppWindowDropZone(appWindow,id,userData,zone,...)

	struct AppWindowDropZone * AddAppWindowDropZone(struct <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> *aw,
	                           ULONG id,ULONG userData,...);

<b>   FUNCTION</b>
	Once it is created, Workbench will allow the user to drop an
	icon anywhere inside an <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a>, regardless of whether the
	icon was dropped on an area designated for dropping icons on
	or not. With AddAppWindowDropZoneA() you can tell Workbench
	which <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> areas are suitable for dropping icons on.

<b>   INPUTS</b>
	aw -- An <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> data structure, as returned by
	    <a href="../Includes_and_Autodocs_3._guide/node05BC.html">workbench.library/AddAppWindowA</a>.
	id -- This variable is strictly for your own use and is ignored by
	    Workbench. Typical uses in C are in switch and case statements,
	    and in assembly language table lookup. Later, when an icon is
	    dropped on the designated area, the <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line115">AppMessage</a> sent to your
	    port will have the am_ID member set to this value.
	userData -- this variable is strictly for your own use and is ignored
	    by Workbench. Later, when an icon is dropped on the designated area,
	    the <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line115">AppMessage</a> sent to your port will have the am_UserData member
	    set to this value.
	tags -- <a href="../Includes_and_Autodocs_3._guide/node0628.html#line19">List</a> of attributes to control the position and size
	    of the drop zone.

<b>   TAGS</b>
	WBDZA_Left (WORD) -- Left edge of the drop zone; a value of
	    0 would create a zone located at the left corner of the
	    window.

	WBDZA_RelRight (WORD) -- Left edge of the drop zone, relative
	    to the window width; a value of -10 would create a zone located
	    10 pixels left of the window right edge.

	WBDZA_Top (WORD) -- Top edge of the drop zone; a value of
	    0 would create a zone located at the top corner of the
	    window.

	WBDZA_RelBottom (WORD) -- Top edge of the drop zone, relative
	    to the window height; a value of -10 would create a zone located
	    10 pixels above the window bottom edge.

	WBDZA_Width (WORD) -- Width of the drop zone.

	WBDZA_RelWidth (WORD) -- Width of the drop zone, relative to the
	    width of the window; a value of -20 would create a zone that
	    is by 20 pixels narrower than the window.

	WBDZA_Height (WORD) -- Height of the drop zone.

	WBDZA_RelHeight (WORD) -- Height of the drop zone, relative to the
	    height of the window; a value of -20 would create a zone that
	    is by 20 pixels smaller than the window.

	WBDZA_Box (struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line895">IBox</a> *) -- Position and size of the drop zone.

	WBDZA_Hook (struct <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> *) -- Pointer to a hook that will be
	    invoked whenever the mouse enters or leaves your drop zone
	    area. Your hook will be called with the following parameters:

	    result = hookFunc(hook,reserved,arm)
	      D0               A0     A2     A1

	    <a href="../Includes_and_Autodocs_3._guide/node0654.html#line39">LONG</a> hookFunc(struct <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> *hook,<a href="../Includes_and_Autodocs_3._guide/node0654.html#line37">APTR</a> reserved,
	                  struct <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line383">AppWindowDropZoneMsg</a> *adzm);

	    The reserved parameter will be set to NULL (V44).
	    For future enhancement, make sure that your hook
	    function always returns NULL (V44).

	    The drop zone message contents are as follows:

	        adzm_RastPort
	            A pointer to the <a href="../Includes_and_Autodocs_3._guide/node05D7.html#line53">RastPort</a> to render into.
	            Typically, this is the <a href="../Includes_and_Autodocs_3._guide/node05D7.html#line53">RastPort</a> of the window
	            the drop zone is attached to.

	        adzm_DropZoneBox
	            This member describes the position and size
	            of the drop zone. The zone is guaranteed to
	            be a valid area, i.e. the Width and Height
	            will both be greater than 0 and the Left/Top
	            will be well within the bounds of the window
	            containing the drop zone.

	        adzm_ID
	        adzm_UserData
	            These two come straight from the values you passed
	            as the id and userData parameters to
	            AddAppWindowDropZoneA().

	        adzm_Action
	            Depending upon whether the mouse has just entered
	            or left the drop zone area, this variable will be
	            set to ADZMACTION_Enter or to ADZMACTION_Leave.
	            Any other values for adzm_Action should be ignored.

	            When the mouse enters the drop zone, do your drop
	            zone area highlighting. When the mouse leaves the
	            drop zone, remove any highlighting done in the
	            previous ADZMACTION_Enter pass.

	            Note that the mouse leaving your drop zone box
	            does not imply that no icons will be dropped on it.
	            You may still receive a notification lateron, telling
	            you that your drop zone had icons dropped on it.
	            The hook function is solely for highlighting and
	            unhighlighting the drop zone area.

	    A final word of warning: when your hook code is called, you
	    must limit your rendering to simple drawing operations
	    from graphics.library; if you do anything complex that
	    involves Intuition locking and unlocking the display,
	    such as refreshing gadgets or locking <a href="../Includes_and_Autodocs_3._guide/node061E.html#line65">IntuitionBase</a>,
	    you will deadlock the operating system. You have been
	    warned!

<b>   RESULT</b>
	dropZone -- A newly created drop zone identifier, or NULL if
	    it could not be created; use <a href="../Includes_and_Autodocs_3._guide/node0182.html">dos.library/IoErr</a> to find out
	    what caused it to fail.

<b>   NOTES</b>
	Once an <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> has a drop zone installed, Workbench will send
	a new type of <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line115">AppMessage</a> to your port if icons are dropped on
	a drop zone. Instead of AMTYPE_APPWINDOW type messages you
	will receive AMTYPE_APPWINDOWZONE messages. In fact, you will
	no longer hear any AMTYPE_APPWINDOW type messages since Workbench
	will allow users to drop icons only on drop zones. Be prepared
	to handle this.

	Adding a drop zone to an <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> does not guarantee that only
	AMTYPE_APPWINDOWZONE type messages will arrive at your message
	port. In fact, the user may be able to drop an icon on the window
	before the first drop zone is installed. Be prepared to handle
	this.

	Workbench checks drop zones in the order in which they were added
	to the <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a>. Thus, if two zones overlap, the zone that was
	added first will be reported as hit.

	An <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> starts out with its entire area available for dropping
	icons on. Thus, you may receive AppMessages for icons dropped upon
	your <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line160">AppWindow</a> before you have added the first drop zone to it.
	Be prepared to handle this.

	Drop zones must be created with a position and a size. If you omit
	either one, this routine will fail.

	When an icon is dropped on a drop zone, the <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line115">AppMessage</a> am_MouseX and
	am_MouseY members will be relative to the window top left corner;
	they WILL NOT be relative to the left/top edge of the drop zone.

<b>   SEE ALSO</b>
	<a href="../Includes_and_Autodocs_3._guide/node0182.html">dos.library/IoErr</a>
	<a href="../Includes_and_Autodocs_3._guide/node05BC.html">workbench.library/AddAppWindowA</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
