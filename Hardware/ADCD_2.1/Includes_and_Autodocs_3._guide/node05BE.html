<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/39.2 FILE="wb" NODE="ChangeWorkbenchSelectionA()" TITLE="workbench.library/ChangeWorkbenchSelectionA.library/ChangeWorkbenchSelectionA" -->
<head>
<title>workbench.library/ChangeWorkbenchSelectionA.library/ChangeWorkbenchSelectionA</title>
</head>
<body text="#000000" bgcolor="#AAAAAA">
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_3._guide/node05BD.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_3._guide/node05BF.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

<b>   NAME</b>
	ChangeWorkbenchSelectionA -- Change the selection states of icons
	    displayed by Workbench. (V44)

<b>   SYNOPSIS</b>
	success = ChangeWorkbenchSelectionA(name,hook,tags)
	   D0                                A0   A1   A2

	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line73">BOOL</a> ChangeWorkbenchSelectionA(STRPTR name,struct <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> *hook,
	                               struct <a href="../Includes_and_Autodocs_3._guide/node064C.html#line31">TagItem</a> *tags);

	success = ChangeWorkbenchSelection(name,hook,...);

	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line73">BOOL</a> ChangeWorkbenchSelection(STRPTR name,struct <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> *hook,...);

<b>   FUNCTION</b>
	The icons displayed inside each Workbench window can be in selected
	or in unselected state. This routine allows you to change this state
	for every icon found in a particular window.

<b>   INPUTS</b>
	name -- Name of the drawer whose icons should be submitted to the
	    callback hook for testing; pass NULL as the name to have the
	    icons in the Workbench backdrop (where disks and AppIcons live)
	    passed through the hook. Note that the drawer whose icons you
	    want to change must be open before you can make any changes.

	hook -- <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> to be invoked for each icon in the window.

	    The hook code will be invoked with the following parameters

	    action = hookFunc(hook,reserved,ism)
	       D0                A0     A2    A1

	    ULONG hookFunc(struct <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> *hook,<a href="../Includes_and_Autodocs_3._guide/node0654.html#line37">APTR</a> reserved,
	                   struct <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line398">IconSelectMsg</a> *ism);

	    The reserved parameter will be set to NULL (V44).

	    The <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line398">IconSelectMsg</a> contents are as follows:

	        ism_Length
	            Size of the <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line398">IconSelectMsg</a> data structure (in bytes).
	            Since this message may need to grow in the future,
	            always compare this value against the message size
	            you expect. For V44, ism_Length is guaranteed to
	            contain a value of 36. Expect this value to become
	            larger in the future.

	        ism_Drawer
	            A lock on the drawer the object in question resides
	            in. This may be NULL for the Workbench backdrop (where
	            disks and AppIcons live).

	        ism_Name
	            Name of the object in question; please note that for
	            disk icons the name does not end with a colon character
	            (&#034;:&#034;).

	        ism_Type
	            This is one of WBDISK, WBDRAWER, WBTOOL, WBPROJECT,
	            WBGARBAGE, WBDEVICE, WBKICK or WBAPPICON.

	        ism_Selected
	            TRUE if the object in question is currently selected,
	            FALSE otherwise.

	        ism_Tags
	            The list of tag items passed to ChangeWorkbenchSelectionA().

	        ism_DrawerWindow
	            If the object in question is a drawer or disk and its
	            associated window is currently open, then you will find
	            a pointer to it here.

	        ism_ParentWindow
	            This is a pointer to the window the object resides in.

	        ism_Left
	        ism_Top
	        ism_Width
	        ism_Height
	            These denote the position and size of the object in
	            question, relative to the top left edge of the window
	            it resides in.

	    With the exception of the ism_Left and ism_Top members, the
	    <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line398">IconSelectMsg</a> is read-only. The ism_Left/ism_Top members can
	    be used to change the position of the icon.

	    You hook code must return one of the following values:

	        ISMACTION_Unselect
	            Unselect the icon

	        ISMACTION_Select
	            Select the icon

	        ISMACTION_Ignore
	            Do not change the selection state of the icon.

	        ISMACTION_Stop
	            Do not change the selection state of the icon. Do not
	            invoke the hook function again.

	tags -- Additional options.

<b>   TAGS</b>
	No tags are defined yet (V44).

<b>   RESULTS</b>
	result -- FALSE if the drawer in question could not be found,
	    TRUE otherwise. If FALSE is returned, you can query the error
	    code using <a href="../Includes_and_Autodocs_3._guide/node0182.html">dos.library/IoErr()</a>.

<b>   EXAMPLE</b>
	/* Select the icon labeled &#034;Prefs&#034; in the drawer &#034;SYS:&#034;. */
	struct <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> hook;

	/* This hook code is responsible for selecting the icon. */
	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line73">BOOL</a>
	SelectPrefs(struct <a href="../Includes_and_Autodocs_3._guide/node0617.html#line27">Hook</a> *hook,<a href="../Includes_and_Autodocs_3._guide/node0654.html#line37">APTR</a> reserved,struct <a href="../Includes_and_Autodocs_3._guide/node05D6.html#line398">IconSelectMsg</a> *ism)
	{
	    /* <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line1429">Remember</a> the old icon select status; if the icon name
	     * does not match &#034;Prefs&#034;, this is what we will return,
	     * not changing anything.
	     */
	    <a href="../Includes_and_Autodocs_3._guide/node0654.html#line73">BOOL</a> selected = ism-&#062;ism_Selected;

	    /* If the name matches, select it. Otherwise, leave its
	     * select state alone.
	     */
	    if(Stricmp(ism-&#062;ism_Name,&#034;Prefs&#034;) == 0)
	        selected = TRUE;

	    return(selected);
	}

	.
	.
	.

	/* Set up the hook data structure. */
	hook.h_Entry = HookEntry;
	hook.h_SubEntry = (HOOKFUNC)SelectPrefs;

	/* And finally change the selection. */
	ChangeWorkbenchSelection(&#034;SYS:&#034;,&#038;hook,TAG_END);

<b>   NOTES</b>
	The name of the drawer to work on is interpreted relative
	to the current directory of the program to call
	ChangeWorkbenchSelectionA().

	For this function call to succeed, Workbench must be open. This
	means that the LoadWB command was executed and the Workbench
	screen has been opened.

	While the user is dragging icons, no on-screen rendering may
	take place. In this state Workbench may refuse to execute the
	ChangeWorkbenchSelection() call and return an error code instead
	(ERROR_OBJECT_IN_USE).

<b>   SEE ALSO</b>
	<a href="../Includes_and_Autodocs_3._guide/node0182.html">dos.library/IoErr</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
