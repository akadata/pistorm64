<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/39.2 FILE="intuition" NODE="EasyRequestArgs()" TITLE="intuition.library/EasyRequestArgs" -->
<head>
<title>intuition.library/EasyRequestArgs</title>
</head>
<body text="#000000" bgcolor="#AAAAAA">
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Includes_and_Autodocs_3._guide/node03AA.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Includes_and_Autodocs_3._guide/node03AC.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->

<b>    NAME</b>
	EasyRequestArgs -- Easy alternative to <a href="../Includes_and_Autodocs_3._guide/node0396.html">AutoRequest()</a>. (V36)
	EasyRequest -- Varargs stub for EasyRequestArgs(). (V36)

<b>    SYNOPSIS</b>
	num = EasyRequestArgs( <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a>, easyStruct, IDCMP_ptr, ArgList )
	D0                     A0      A1          A2         A3

	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line39">LONG</a> EasyRequestArgs( struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a> *, struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line1456">EasyStruct</a> *,
		ULONG *, <a href="../Includes_and_Autodocs_3._guide/node0654.html#line37">APTR</a> );

	num = EasyRequest( <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a>, easyStruct, IDCMP_ptr, Arg1, Arg2, ... )

	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line39">LONG</a> EasyRequest( struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a> *, struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line1456">EasyStruct</a> *,
		ULONG *, <a href="../Includes_and_Autodocs_3._guide/node0654.html#line37">APTR</a>, ... );

	( from intuition.h )
	struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line1456">EasyStruct</a> {
	    ULONG	es_StructSize;
	    ULONG	es_Flags;
	    <a href="../Includes_and_Autodocs_3._guide/node0654.html#line50">UBYTE</a>	*es_Title;
	    <a href="../Includes_and_Autodocs_3._guide/node0654.html#line50">UBYTE</a>	*es_TextFormat;
	    <a href="../Includes_and_Autodocs_3._guide/node0654.html#line50">UBYTE</a>	*es_GadgetFormat;
	};

<b>    FUNCTION</b>
	This function provides a simpler method of using a 'System
	Requester' than provided by <a href="../Includes_and_Autodocs_3._guide/node0396.html">AutoRequest()</a>.  It performs layout
	and size calculations sensitive to the current font and screen
	resolution.

	It provides for the descriptive 'body' text and the gadget
	text to be constructed from 'printf' style format strings.

	It also provides a general way for the requester to be
	sensitive to particular IDCMP messages.

	The first function listed is the actual Intuition library
	function.  It is passed the arguments for the formatting
	operations as a pointer to the first argument.

	The second function uses a C-style variable number of argument
	(varargs) calling convention.  It should be implemented as
	a call to the first function, and might be supplied by your
	compiler vendor, in amiga.lib, or using the first example below,
	for most C compilers.

	NOTE: The formatting is done by <a href="../Includes_and_Autodocs_3._guide/node0227.html">exec.library/RawDoFmt()</a>, so
	be aware that to display a 32-bit integer argument, for
	example, you must say &#034;%ld&#034;, not &#034;%d&#034;, since <a href="../Includes_and_Autodocs_3._guide/node0227.html">RawDoFmt()</a> is
	&#034;word-oriented.&#034;

	NOTE: This function switches the processor stack to ensure
	sufficient stack space for the function to complete.

<b>    EXAMPLES</b>
	/* varargs interface works for most C compilers */
	EasyRequest( w, es, ip, arg1 )
	struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a>	*w;
	struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line1456">EasyStruct</a> *es;
	ULONG		  *ip;
	int		  arg1;
	{
	    return ( EasyRequestArgs( w, es, ip, &#038;arg1 ) );
	}

	/*********************************************/

	/* typical use */
	struct <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line1456">EasyStruct</a> volumeES = {
	    sizeof (struct EasyStruct),
	    0,
	    &#034;Volume Request&#034;,
	    &#034;Please insert volume %s in any drive.&#034;,
	    &#034;Retry|Cancel&#034;,
	};
	#define CANCEL	(0)

	Volume	*
	getVolume( volname )
	<a href="../Includes_and_Autodocs_3._guide/node0654.html#line50">UBYTE</a>	*volname;
	{
	    Volume	*vptr;
	    Volume	*findVolume();
	    <a href="../Includes_and_Autodocs_3._guide/node0654.html#line43">UWORD</a>	reply;
	    ULONG	iflags;

	    iflags = IDCMP_DISKINSERTED;

	while ( ((vptr = findVolume( volname )) == NULL) &#038;&#038;
	 (EasyRequest( w, &#038;volumeES, &#038;iflags, volname ) != CANCEL) )
		/* loop */ ;

	    /* note that in some circumstances, you will have to
	       re-initialize the value of 'iflags'.  Here, it
	       is either unchanged, or returned as the single
	       IDCMPFlag value IDCMP_DISKINSERTED.  If you combine
	       multiple  IDCMPFlag values in 'iflags,' only
	       one will be returned, so you must reinitialize
	       'iflags' to be the combination.
	      */
	    return ( vptr );
	}

<b>    INPUTS</b>
	<a href="../Includes_and_Autodocs_3._guide/node05E0.html#line908">Window</a> = Reference window pointer, determines the screen and
	    title of the requester window.  This can be NULL, which
	    means the requester is to appear on the Workbench screen,
	    or default public screen, if defined.
	IDCMP_ptr = Pointer to IDCMP flags that you want to terminate
		the requester.  This pointer may be NULL.
	easyStruct = Pointer to <a href="../Includes_and_Autodocs_3._guide/node05E0.html#line1456">EasyStruct</a> structure with fields
		interpreted as follows:

	es_StructSize = sizeof (struct EasyStruct), for future extension.
	es_Flags = 0 for now, in the future may specify other options.
	es_Title = Title of system requester window.  If this is NULL,
	    the title will be taken to be the same as the title of 'Window',
	    if provided, or else &#034;System Request.&#034;
	es_TextFormat = <a href="../Includes_and_Autodocs_3._guide/node016B.html">Format</a> string, a la <a href="../Includes_and_Autodocs_3._guide/node0227.html">RawDoFmt()</a>, for message in
	    requester body.  Lines are separated by the newline character.
	    This character is represented in C by 'n', in the Amiga Shell
	    by &#034;*N&#034;, etc.  Formatting '%' functions are supported exactly
	    as in <a href="../Includes_and_Autodocs_3._guide/node0227.html">RawDoFmt()</a>.
	es_GadgetFormat = <a href="../Includes_and_Autodocs_3._guide/node016B.html">Format</a> string for gadgets.  <a href="../Includes_and_Autodocs_3._guide/node0332.html">Text</a> for separate
	    gadgets is separated by '|'.  <a href="../Includes_and_Autodocs_3._guide/node016B.html">Format</a> functions are supported.
	    You MUST specify at least one gadget.

	ArgList = Arguments for format commands.   Arguments for
	    GadFmt follow arguments for TextFmt.

<b>    RESULT</b>
	0, 1, ..., N = Successive GadgetID values, for the gadgets
	    you specify for the requester.  NOTE: The numbering
	    from left to right is actually: 1, 2, ..., N, 0.
	    This is for compatibility with <a href="../Includes_and_Autodocs_3._guide/node0396.html">AutoRequest()</a>, which has
	    FALSE for the rightmost gadget.

	-1 = Means that one of the caller-supplied IDCMPFlags occurred.
	    The IDCMPFlag value is in the longword pointed to by IDCMP_ptr.

<b>    NOTES</b>
	When DOS brings up EasyRequests() on your process (eg.
	&#034;Please insert volume XXX in any drive&#034;, they normally come
	up on the default public screen, which is usually the Workbench
	screen.  If you set your <a href="../Includes_and_Autodocs_3._guide/node05D9.html#line36">Process</a> pr_WindowPtr field to point to
	one of your windows, then DOS will bring its requesters up on the
	same screen as that window.  A pr_WindowPtr of -1 prevents
	requesters from coming up at all.
	(Some FileSystem requesters cannot be redirected or supressed).

<b>    BUGS</b>
	Does not fall back to a recoverable alert if the requester
	 cannot be created.

	Does not handle case when gadgets don't fit or window title
	is too long, although it does trim trailing spaces from the
	title for calculating dimensions.

<b>    PLANS</b>
	Possible enhancements include: centering of text, size-sensitive
	layout,  window-relative requester, vertical gadget layout,
	window placement, more keyboard shortcuts.

	We also reserve the use of the newline character ('n') in
	gadget format strings for future use as a line separator.

<b>    SEE ALSO</b>
	<a href="../Includes_and_Autodocs_3._guide/node0227.html">exec.library/RawDoFmt()</a>, <a href="../Includes_and_Autodocs_3._guide/node0398.html">BuildEasyRequestArgs()</a>, <a href="../Includes_and_Autodocs_3._guide/node03FB.html">SysReqHandler()</a>,
	<a href="../Includes_and_Autodocs_3._guide/node0396.html">AutoRequest()</a>, <a href="../Includes_and_Autodocs_3._guide/node0399.html">BuildSysRequest()</a>
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
