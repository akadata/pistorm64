<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Devices/Dev_14" NODE="14-3-2" TITLE="14 / Advanced Commands / Clearing The Track Buffer" INDEX="Devices/Dev_Index/MAIN" -->
<head>
<title>14 / Advanced Commands / Clearing The Track Buffer</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Devices_Manual_guide/node012A.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Devices_Manual_guide/node00E5.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Devices_Manual_guide/node00E7.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
ETD_CLEAR and <a href="../Includes_and_Autodocs_2._guide/node051F.html">CMD_CLEAR</a> mark the track buffer as invalid, forcing a reread
of the disk on the next operation. ETD_UPDATE or <a href="../Includes_and_Autodocs_2._guide/node0521.html">CMD_UPDATE</a> would be used
to force data out to the disk before turning the motor off. ETD_CLEAR or
<a href="../Includes_and_Autodocs_2._guide/node051F.html">CMD_CLEAR</a> is usually used after having locked out the trackdisk device via
the use of the disk resource, when you wish to prevent the track from
being updated, or when you wish to force the track to be re-read.
ETD_CLEAR or <a href="../Includes_and_Autodocs_2._guide/node051F.html">CMD_CLEAR</a> will not do an update, nor will an update command
do a clear.

You clear the track buffer by passing an <a href="../Devices_Manual_guide/node00DE.html#line12">IOExtTD</a> to the device with
<a href="../Includes_and_Autodocs_2._guide/node051F.html">CMD_CLEAR</a> or ETD_CLEAR set in io_Command.  For ETD_CLEAR, you must also
set iotd_Count to the current diskchange number.

   DiskIO-&#062;iotd_Req.io_Command = TD_CLEAR;
   DoIO((struct IORequest *)DiskIO);
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
