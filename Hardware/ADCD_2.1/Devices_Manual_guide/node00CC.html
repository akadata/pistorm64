<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Devices/Dev_6" NODE="6-2" TITLE="6 Input Device / Device Interface" INDEX="Devices/Dev_Index/MAIN" -->
<head>
<title>6 Input Device / Device Interface</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Devices_Manual_guide/node012A.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Devices_Manual_guide/node00CB.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Devices_Manual_guide/node00CD.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
The input device operates like the other Amiga devices.  To use it, you
must first open the input device, then send I/O requests to it, and then
close it when finished.  See the <a href="../Devices_Manual_guide/node0006.html">Introduction to Amiga System Devices</a>
chapter for general information on device usage.

A number of structures are used by the input device to do its processing.
Some are used to pass commands and data to the device, some are used to
describe input events like mouse movements and key depressions, and one
<a name="line10">structure is used to describe the environment for input event handlers.</a>

<a name="line12">The I/O request used by the input device for most commands is IOStdReq.</a>

   struct IOStdReq
   {
       struct Message io_Message; /* message reply port */
       struct Device  *io_Device; /* device node pointer */
       struct Unit    *io_Unit;   /* unit */
       UWORD  io_Command;         /* input device command */
       UBYTE  io_Flags;           /* input device flags */
       BYTE   io_Error;           /* error code */
       ULONG  io_Length;          /* number of bytes to transfer */
       APTR   io_Data;            /* pointer to data area */
   };

See the include file exec/<a href="../Includes_and_Autodocs_2._guide/node0094.html">io.h</a> for the complete structure definition.
<a name="line27"></a>
Two of the input device commands - <a href="../Devices_Manual_guide/node00D7.html">IND_SETTHRESH</a> and <a href="../Devices_Manual_guide/node00D8.html">IND_SETPERIOD</a> -
<a name="line29">require a time specification and must use a timerequest structure instead</a>
<a name="line30">of an IOStdReq.</a>

   struct timerequest
   {
       struct IORequest tr_node;
       struct timeval tr_time;
   };

As you can see, the timerequest structure includes an IORequest structure.
The io_Command field of theIORequest indicates the command to the input
device and the timeval structure sets the time values.  See the include
file devices/<a href="../Includes_and_Autodocs_2._guide/node0053.html">timer.h</a> for the complete structure definition.


   In Case You Feel Like Reinventing the Wheel...
   ----------------------------------------------
   You could define a &#034;super-IORequest&#034; structure for the input device
   which would combine the IOStdReq fields with the timeval structure of
   the timerequest structure.

 <a href="../Devices_Manual_guide/node00CD.html">Opening The Input Device</a> 
 <a href="../Devices_Manual_guide/node00CE.html">Input Device Event Types</a> 
 <a href="../Devices_Manual_guide/node00CF.html">Closing The Input Device</a> 
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
