<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Devices/Dev_examples/Epsonx_density.c" NODE="MAIN" TITLE="Devices/Dev_examples/Epsonx_density.c" -->
<head>
<title>Devices/Dev_examples/Epsonx_density.c</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<img src="../images/index_d.gif" alt="[Index]">
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Devices_Manual_guide/node017D.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Devices_Manual_guide/node017F.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
/*
        Density module for EpsonX driver.
*/

#include &#060;exec/types.h&#062;
#include &#034;devices/printer.h&#034;
#include &#034;devices/prtbase.h&#034;

SetDensity(density_code)
ULONG density_code;
{
        extern struct PrinterData *PD;
        extern struct PrinterExtendedData *PED;

        /* SPECIAL_DENSITY     0    1    2    3    4    5    6    7 */
        static int XDPI[8] = {120, 120, 120, 240, 120, 240, 240, 240};
        static int YDPI[8] = {72, 72, 144, 72, 216, 144, 216, 216};
        static char codes[8] = {'L', 'L', 'L', 'Z', 'L', 'Z', 'Z', 'Z'};

        PED-&#062;ped_MaxColumns =
                PD-&#062;pd_Preferences.PaperSize == W_TRACTOR ? 136 : 80;
        density_code /= SPECIAL_DENSITY1;
        /* default is 80 chars (8.0 in.), W_TRACTOR is 136 chars (13.6 in.) */
        PED-&#062;ped_MaxXDots =
                (XDPI[density_code] * PED-&#062;ped_MaxColumns) / 10;
        PED-&#062;ped_XDotsInch = XDPI[density_code];
        PED-&#062;ped_YDotsInch = YDPI[density_code];
        if ((PED-&#062;ped_YDotsInch = YDPI[density_code]) == 216) {
                PED-&#062;ped_NumRows = 24;
        }
        else if (PED-&#062;ped_YDotsInch == 144) {
                PED-&#062;ped_NumRows = 16;
        }
        else {
                PED-&#062;ped_NumRows = 8;
        }
        return((int)codes[density_code]);
}
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
