<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Devices/Dev_11" NODE="11-4-2" TITLE="11 / RigidDiskBlock - Fields and Implementation / Alien Filing Systems" INDEX="Devices/Dev_Index/MAIN" -->
<head>
<title>11 / RigidDiskBlock - Fields and Implementation / Alien Filing Systems</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Devices_Manual_guide/node012A.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Devices_Manual_guide/node007A.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Devices_Manual_guide/node007C.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
When a filing system other than the ROM filing system is to be used, the
following steps take place.

   1. First, open filesystem.resource in preparation for finding the
      filesystem segment we want.  If filesystem.resource doesn't exist
      then create it and add it via <a href="../Includes_and_Autodocs_2._guide/node032A.html">AddResource()</a>.  Under 2.0 the resource
      is created by the system early on in the initialization sequence.
      Under pre-V36 Kickstart, it is the responsibility of the first RDB
      driver to create it.

   2. Scan filesystem.resource looking for a filesystem that matches the
      DosType and version that we want.  If it exists go to step 4.

   3. Since the driver couldn't find the filesystem it needed, it will have
      to load it from the RDB area.  The list of <a href="../Devices_Manual_guide/node0079.html#line168">FileSysHeaderBlocks</a>
      (pointed to by the &#034;RDSK&#034; block) is scanned for a filesystem of the
      required DosType and version.  If none is found then the driver will
      give up and abort the mounting of the partition.  If the required
      filesystem is found, then it is <a href="../Includes_and_Autodocs_2._guide/node02C5.html">LoadSeg()</a>'ed from the &#034;LSEG&#034; blocks
      and added as a new entry to the filesystem.resource.

   4. The SegList pointer of the found or loaded filesystem is held in the
      <a href="../Includes_and_Autodocs_2._guide/node011D.html#line32">FileSysEntry</a> structure (which is basically an environment vector for
      this filing system).  Using the patch flags, the driver now patches
      the newly created environment vector (pointed to by the new DosNode)
      using the values in the FileSysEntry being used.  This ensures that
      the partition will have the correct filing system set up with the
      correct mount variables using a shared SegList.

The eb_Mountlist will now be set up with prioritized bootnodes and maybe
some non-bootable, but mounted partitions.  The system bootstrap will now
take over.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
