<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Devices/Dev_4" NODE="4-8" TITLE="4 Console Device / Input Event Reports" INDEX="Devices/Dev_Index/MAIN" -->
<head>
<title>4 Console Device / Input Event Reports</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Devices_Manual_guide/node012A.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Devices_Manual_guide/node0094.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Devices_Manual_guide/node0096.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
If you select any of these events you will start to get information about
the events in the following form:

&#060;CSI&#062;&#060;class&#062;;&#060;subclass&#062;;&#060;keycode&#062;;&#060;qualifiers&#062;;&#060;x&#062;;&#060;y&#062;;&#060;secs&#062;;&#060;microsecs&#062;|
<a name="line6"></a>
&#060;CSI&#062;
   is a one-byte field.  It is the &#034;control sequence introducer,&#034; 0x9B
   in hex.

&#060;class&#062;
   is the RAW input event type, from the above table.

&#060;subclass&#062;
   is usually 0. If the mouse is moved to the right controller, this
   would be 1.

&#060;keycode&#062;
   indicates which raw key number was pressed. This field can also be
   used for mouse information.

   The Raw Key Might Be The Wrong Key.
   -----------------------------------
   National keyboards often have different keyboard arrangements. This
   means that a particular raw key number may represent different
   characters on different national keyboards. The normal console read
   stream (as opposed to raw events) will contain the proper ASCII
   character for the keypress as translated according to the user's
<a name="line29">   keymap.</a>

&#060;qualifiers&#062;
   indicates the state of the keyboard and system.

The qualifiers are defined as follows:

                         INPUT EVENT QUALIFIERS

   Bit  Mask   Key
   ---  ----   ---
    0   0001   Left shift
    1   0002   Right shift
    2   0004   Caps Lock Associated keycode is special; see below.
    3   0008   Ctrl
    4   0010   Left Alt
    5   0020   Right Alt
    6   0040   Left Amiga key pressed
    7   0080   Right Amiga key pressed
    8   0100   Numeric pad
    9   0200   Repeat
    10  0400   Interrupt Not currently used.
    11  0800   Multibroadcast This window (active one) or all windows.
    12  1000   Middle mouse button (Not available on standard mouse)
    13  2000   Right mouse button
    14  4000   Left mouse button
<a name="line55">    15  8000   Relative mouse Mouse coordinates are relative, not absolute.</a>

The Caps Lock key is handled in a special manner. It generates a keycode
only when it is pressed, not when it is released. However, the up/down bit
(80 hex) is still used and reported. If pressing the Caps Lock key causes
the LED to light, keycode 62 (Caps Lock pressed) is sent. If pressing the
Caps Lock key extinguishes the LED, keycode 190 (Caps Lock released) is
sent. In effect, the keyboard reports this key as held down until it is
struck again.

The &#060;x&#062; and &#060;y&#062; fields are filled by some classes with an Intuition
address:  x&#060;&#060;16+y.

The &#060;seconds&#062; and &#060;microseconds&#062; fields contain the system time stamp
taken at the time the event occurred.  These values are stored as
longwords by the system.

With RAW keyboard input selected, keys will no longer return a simple
one-character &#034;A&#034; to &#034;Z&#034; but will instead return raw keycode reports
of the form:

  &#060;CSI&#062;1;0;&#060;keycode&#062;;&#060;qualifiers&#062;;&#060;prev1&#062;;&#060;prev2&#062;;&#060;seconds&#062;;&#060;microseconds&#062;|

For example, if the user pressed and released the A key with the left
Shift and right Amiga keys also pressed, you might receive the following
data:

  &#060;CSI&#062;1;0;32;32769;14593;5889;421939940;316673|

  &#060;CSI&#062;1;0;160;32769;0;0;421939991;816683|

The &#060;keycode&#062; field is an ASCII decimal value representing the key pressed
or released.  Adding 128 to the pressed key code will result in the
released keycode.

The &#060;prev1&#062; and &#060;prev2&#062; fields are relevant for the interpretation of keys
which are modifiable by dead-keys (see &#034;<a href="../Libraries_Manual_guide/node0477.html">Dead-Class Keys</a>&#034; section). The
&#060;prev1&#062; field shows the previous key pressed.  The lower byte shows the
qualifier, the upper byte shows the key code. The &#060;prev2&#062; field shows the
key pressed before the previous key.  The lower byte shows the qualifier,
the upper byte shows the key code.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
