<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Devices/Dev_14" NODE="14-7-1" TITLE="14 / Commands for Low-Level Access / Reading Raw Data From A Disk" INDEX="Devices/Dev_Index/MAIN" -->
<head>
<title>14 / Commands for Low-Level Access / Reading Raw Data From A Disk</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Devices_Manual_guide/node012A.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Devices_Manual_guide/node00F6.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Devices_Manual_guide/node00F8.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
ETD_RAWREAD and <a href="../Includes_and_Autodocs_2._guide/node052D.html">TD_RAWREAD</a> perform a raw read from a track on the disk.
They seek to the specified track and read it into the user's buffer.
<a name="line4"></a>
No processing of the track is done. It will appear exactly as the bits
come off the disk - typically in some legal flux format (such as MFM, FM,
GCR, etc; if you don't know what these are, you shouldn't be using this
<a name="line8">call). Caveat programmer.</a>

This interface is intended for sophisticated programming only. You must
fully understand digital magnetic recording to be able to utilize this
call. It is also important that you understand that the MFM encoding
scheme used by the higher level trackdisk routines may change without
notice. Thus, this routine is only really useful for reading and decoding
other disks such as MS-DOS formatted disks.

You read raw data from a disk by passing an <a href="../Devices_Manual_guide/node00DE.html#line12">IOExtTD</a> to the device with
<a href="../Includes_and_Autodocs_2._guide/node052D.html">TD_RAWREAD</a> or ETD_RAWREAD set in io_Command, the number of bytes to be
read set in io_Length (maximum 32K), a pointer to the read buffer set in
io_Data, and io_Offset set to the byte offset of the track where you want
to the read to begin.  For ETD_RAWREAD, you must also set iotd_Count to
the current diskchange number.

  DiskIO-&#062;iotd_Req.io_Length = 1024;          /* number of bytes to read */
  DiskIO-&#062;iotd_Req.io_Data = (APTR)Readbuffer; /* pointer to buffer */
  DiskIO-&#062;iotd_Req.io_Offset = (ULONG)(TRACK_SIZE * track); /* track no. */
  DiskIO-&#062;iotd_Req.io_Flags = IOTDF_INDEX      /* Set for index sync */
  DiskIO-&#062;iotd_Count = change_count;           /* diskchange number */
  DiskIO-&#062;iotd_Req.io_Command = ETD_RAWREAD;
<a name="line30">  DoIO((struct IORequest *)DiskIO);</a>

A raw read may be synched with the index pulse by setting the
IOTDF_INDEXSYNC flag or synched with a $4489 sync pattern by setting the
IOTDF_WORDSYNC flag.  See the &#034;<a href="../Includes_and_Autodocs_2._guide/node051E.html">trackdisk.doc</a>&#034; of the Amiga ROM Kernel
Reference Manual: Includes and Autodocs for more information about these
flags.

   Forewarned is Forearmed.
   ------------------------
   Amiga, Inc. may make enhancements to the disk format in the
   future. Amiga, Inc. intends to provide compatibility within the
   trackdisk device.  Anyone who uses these raw routines is bypassing
   this upward-compatibility and does so at her own risk.
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
