<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Devices/Dev_2" NODE="2-3-5" TITLE="2 / Device Interface / Closing The Audio Device" INDEX="Devices/Dev_Index/MAIN" -->
<head>
<title>2 / Device Interface / Closing The Audio Device</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Devices_Manual_guide/node012A.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Devices_Manual_guide/node0025.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Devices_Manual_guide/node0027.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
An <a href="../Includes_and_Autodocs_2._guide/node04B8.html">OpenDevice()</a> must eventually be matched by a call to <a href="../Includes_and_Autodocs_2._guide/node04AE.html">CloseDevice()</a>.

All I/O requests must be complete before CloseDevice().  If any requests
are still pending, abort them with <a href="../Includes_and_Autodocs_2._guide/node04A5.html">AbortIO()</a> :

  AbortIO((struct IORequest *)AudioIO);  /* Abort any pending requests */
  WaitPort(AudioMP);                     /* Wait for abort message */
  GetMsg(AudioMP);                       /* Get abort message */
  CloseDevice((struct IORequest *)AudioIO);

CloseDevice() performs an <a href="../Devices_Manual_guide/node002F.html">ADCMD_FREE</a> command on any channels selected by
the ioa_Request.io_Unit field of the <a href="../Devices_Manual_guide/node001E.html#line11">IOAudio</a> request.  This means that if
you close the device with the same IOAudio block that you used to allocate
your channels (or a copy of it), the channels will be automatically freed.

If you allocated channels with multiple allocation commands, you cannot
use this function to close all of them at once. Instead, you will have to
issue one <a href="../Devices_Manual_guide/node002F.html">ADCMD_FREE</a> command for each allocation that you made. After
issuing the ADCMD_FREE commands for each of the allocations, you can call
CloseDevice().
<!-- AG2HTML: BODY=END -->
</pre>

<!-- [amigadev.elowar.com] Automatically generated content... -->
<hr />
<pre>[Back to <a href="http://amigadev.elowar.com/">Amiga Developer Docs</a>]</pre>
<!-- [amigadev.elowar.com] End of automatically generated content. -->

</body>
</html>
