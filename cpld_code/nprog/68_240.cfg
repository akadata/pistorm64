# this supports ECP5 Evaluation Board

reset_config none
adapter driver bcm2835gpio

# Pi4 peripheral base
bcm2835gpio peripheral_base 0xFE000000

# Transition delay calculation: SPEED_COEFF/khz - SPEED_OFFSET
# These depend on system clock; keep conservative for stability.
bcm2835gpio speed_coeffs 194938 48

adapter speed 10

# JTAG                tck tms tdi tdo
adapter gpio tck 26
adapter gpio tms 24
adapter gpio tdi 27
adapter gpio tdo 25

# meh dummy reset to make openocd happy, set to A0 on SMI
adapter gpio srst 5
reset_config srst_only srst_open_drain

transport select jtag
jtag newtap max2 tap -irlen 11 -expected-id 0x020a10dd
init
svf ./rtl/EPM240_bitstream.svf -quiet
sleep 200
shutdown
